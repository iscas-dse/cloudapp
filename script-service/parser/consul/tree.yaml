--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "consul::check"
  namespace: consul
  arguments: 
    id: !ruby/object:Puppet::Parser::AST::Variable
      line: 35
      file: 
      value: title
    ttl: !ruby/object:Puppet::Parser::AST::Undef
      line: 36
      file: 
      value: !ruby/sym undef
    http: !ruby/object:Puppet::Parser::AST::Undef
      line: 37
      file: 
      value: !ruby/sym undef
    script: !ruby/object:Puppet::Parser::AST::Undef
      line: 38
      file: 
      value: !ruby/sym undef
    interval: !ruby/object:Puppet::Parser::AST::Undef
      line: 39
      file: 
      value: !ruby/sym undef
    service_id: !ruby/object:Puppet::Parser::AST::Undef
      line: 40
      file: 
      value: !ruby/sym undef
    timeout: !ruby/object:Puppet::Parser::AST::Undef
      line: 41
      file: 
      value: !ruby/sym undef
    notes: !ruby/object:Puppet::Parser::AST::Undef
      line: 42
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 46
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 44
        file: 
        doc: ""
        name: include
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 46
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Name
              line: 44
              file: 
              value: consul
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 46
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 46
          file: 
          value: basic_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 55
          file: 
          value: 
            ? !ruby/object:Puppet::Parser::AST::String
              line: 47
              file: 
              value: id
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 47
              file: 
              value: id
            ? !ruby/object:Puppet::Parser::AST::String
              line: 48
              file: 
              value: name
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 48
              file: 
              value: name
            ? !ruby/object:Puppet::Parser::AST::String
              line: 49
              file: 
              value: ttl
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 49
              file: 
              value: ttl
            ? !ruby/object:Puppet::Parser::AST::String
              line: 50
              file: 
              value: http
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 50
              file: 
              value: http
            ? !ruby/object:Puppet::Parser::AST::String
              line: 51
              file: 
              value: script
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 51
              file: 
              value: script
            ? !ruby/object:Puppet::Parser::AST::String
              line: 52
              file: 
              value: interval
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 52
              file: 
              value: interval
            ? !ruby/object:Puppet::Parser::AST::String
              line: 53
              file: 
              value: "timeout "
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 53
              file: 
              value: timeout
            ? !ruby/object:Puppet::Parser::AST::String
              line: 54
              file: 
              value: service_id
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 54
              file: 
              value: service_id
            ? !ruby/object:Puppet::Parser::AST::String
              line: 55
              file: 
              value: notes
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 55
              file: 
              value: notes
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 58
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 58
          file: 
          value: check_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 60
          file: 
          value: 
            check: !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym rvalue
              line: 59
              file: 
              doc: ""
              name: delete_undef_values
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 59
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 59
                    file: 
                    value: basic_hash
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 62
        file: 
        doc: ""
        name: consul_validate_checks
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 62
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
              line: 62
              file: 
              variable: check_hash
              key: !ruby/object:Puppet::Parser::AST::Name
                line: 62
                file: 
                value: check
        children: []
      - !ruby/object:Puppet::Parser::AST::Relationship
        line: 67
        file: 
        children: []
        left: !ruby/object:Puppet::Parser::AST::Relationship
          line: 67
          file: 
          children: []
          left: !ruby/object:Puppet::Parser::AST::ResourceReference
            line: 64
            file: 
            type: File
            title: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 64
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 64
                  file: 
                  value: "consul::config_dir"
            children: []
          right: !ruby/object:Puppet::Parser::AST::Resource
            line: 67
            file: 
            doc: ""
            type: file
            instances: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 67
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceInstance
                  line: 67
                  file: 
                  title: !ruby/object:Puppet::Parser::AST::Concat
                    line: 65
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 65
                        file: 
                        value: ""
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 65
                        file: 
                        value: "consul::config_dir"
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 65
                        file: 
                        value: /check_
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 65
                        file: 
                        value: id
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 65
                        file: 
                        value: ".json"
                  parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 66
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceParam
                        line: 66
                        file: 
                        param: content
                        value: !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 66
                          file: 
                          doc: ""
                          name: template
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 66
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 66
                                file: 
                                value: consul/check.json.erb
                          children: []
                        children: []
                  children: []
            children: []
          arrow: "->"
        right: !ruby/object:Puppet::Parser::AST::ResourceReference
          line: 67
          file: 
          type: Class
          title: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 67
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::String
                line: 67
                file: 
                value: "consul::run_service"
          children: []
        arrow: "~>"
  doc: "== Define consul::check\n\nSets up a Consul healthcheck\nhttp://www.consul.io/docs/agent/checks.html\n\n== Parameters\n\n[*id*]\n  The id for the check (defaults to $title)\n\n[*ttl*]\n  Value in seconds before the http endpoint considers a failing healthcheck\n  to be \x22HARD\x22 down.\n\n[*http*]\n  HTTP endpoint for the service healthcheck\n\n[*script*]\n  Full path to the location of the healthcheck script. Must be nagios\n  compliant with regards to the return codes.\n\n[*interval*]\n  Value in seconds for the interval between runs of the check\n\n[*service_id*]\n  An optional service_id to match this check against\n\n[*timeout*]\n  A timeout value for HTTP request only\n\n[*notes*]\n  Human readable description of the check\n\n"
  line: 34
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: "consul::config"
  namespace: "consul::config"
  arguments: 
    config_hash: 
    purge: !ruby/object:Puppet::Parser::AST::Boolean
      line: 15
      file: 
      value: true
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 83
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 83
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 18
          file: 
          value: "consul::init_style"
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 80
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::CaseStatement
              line: 79
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::Variable
                line: 20
                file: 
                value: "consul::init_style"
              options: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 35
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 35
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 21
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 21
                          file: 
                          value: upstart
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 28
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 27
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 27
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 27
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 22
                                  file: 
                                  value: /etc/init/consul.conf
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 23
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 23
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 23
                                        file: 
                                        value: "0444"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 24
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 24
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 25
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 25
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 26
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 26
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 26
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 26
                                              file: 
                                              value: consul/consul.upstart.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 34
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 34
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 34
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 28
                                  file: 
                                  value: /etc/init.d/consul
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 29
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 29
                                      file: 
                                      param: ensure
                                      value: !ruby/object:Puppet::Parser::AST::Name
                                        line: 29
                                        file: 
                                        value: link
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 30
                                      file: 
                                      param: target
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 30
                                        file: 
                                        value: /lib/init/upstart-job
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 31
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 31
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 32
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 32
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 33
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 33
                                        file: 
                                        value: "0755"
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 43
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 36
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 36
                          file: 
                          value: systemd
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 43
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 42
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 42
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 42
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 37
                                  file: 
                                  value: /lib/systemd/system/consul.service
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 38
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 38
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 38
                                        file: 
                                        value: "0644"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 39
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 39
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 40
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 40
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 41
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 41
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 41
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 41
                                              file: 
                                              value: consul/consul.systemd.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 51
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 44
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 44
                          file: 
                          value: sysv
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 51
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 50
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 50
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 50
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 45
                                  file: 
                                  value: /etc/init.d/consul
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 46
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 46
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 46
                                        file: 
                                        value: "0555"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 47
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 47
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 48
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 48
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 49
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 49
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 49
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 49
                                              file: 
                                              value: consul/consul.sysv.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 59
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 52
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 52
                          file: 
                          value: debian
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 59
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 58
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 58
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 58
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 53
                                  file: 
                                  value: /etc/init.d/consul
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 54
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 54
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 54
                                        file: 
                                        value: "0555"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 55
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 55
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 56
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 56
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 57
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 57
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 57
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 57
                                              file: 
                                              value: consul/consul.debian.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 67
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 60
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 60
                          file: 
                          value: sles
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 67
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 66
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 66
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 66
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 61
                                  file: 
                                  value: /etc/init.d/consul
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 62
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 62
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 62
                                        file: 
                                        value: "0555"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 63
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 63
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 64
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 64
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 65
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 65
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 65
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 65
                                              file: 
                                              value: consul/consul.sles.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 75
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 68
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 68
                          file: 
                          value: launchd
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 75
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 74
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 74
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 74
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::String
                                  line: 69
                                  file: 
                                  value: /Library/LaunchDaemons/io.consul.daemon.plist
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 70
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 70
                                      file: 
                                      param: mode
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 70
                                        file: 
                                        value: "0644"
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 71
                                      file: 
                                      param: owner
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 71
                                        file: 
                                        value: root
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 72
                                      file: 
                                      param: group
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 72
                                        file: 
                                        value: wheel
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 73
                                      file: 
                                      param: content
                                      value: !ruby/object:Puppet::Parser::AST::Function
                                        ftype: !ruby/sym rvalue
                                        line: 73
                                        file: 
                                        doc: ""
                                        name: template
                                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                          line: 73
                                          file: 
                                          children: 
                                            - !ruby/object:Puppet::Parser::AST::String
                                              line: 73
                                              file: 
                                              value: consul/consul.launchd.erb
                                        children: []
                                      children: []
                                children: []
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::CaseOpt
                    line: 78
                    file: 
                    value: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 76
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Default
                          line: 76
                          file: 
                          value: default
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 78
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym statement
                          line: 77
                          file: 
                          doc: ""
                          name: fail
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 77
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Concat
                                line: 77
                                file: 
                                value: 
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 77
                                    file: 
                                    value: "I don't know how to create an init script for style "
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 77
                                    file: 
                                    value: "consul::init_style"
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 77
                                    file: 
                                    value: ""
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 89
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 83
          file: 
          doc: ""
          name: has_key
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 83
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 83
                file: 
                value: config_hash
              - !ruby/object:Puppet::Parser::AST::String
                line: 83
                file: 
                value: protocol
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 87
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 84
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 84
                file: 
                value: protocol_hash
              value: !ruby/object:Puppet::Parser::AST::ASTHash
                line: 86
                file: 
                value: 
                  protocol: !ruby/object:Puppet::Parser::AST::ArithmeticOperator
                    line: 86
                    file: 
                    operator: "*"
                    lval: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
                      line: 85
                      file: 
                      variable: config_hash
                      key: !ruby/object:Puppet::Parser::AST::String
                        line: 85
                        file: 
                        value: protocol
                    rval: !ruby/object:Puppet::Parser::AST::Name
                      line: 85
                      file: 
                      value: "1"
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 89
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 89
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 88
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 88
                  file: 
                  value: protocol_hash
                value: !ruby/object:Puppet::Parser::AST::ASTHash
                  line: 88
                  file: 
                  value: {}
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 98
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 92
          file: 
          doc: "implicit conversion from string to int so it won't be quoted in JSON\n"
          name: has_key
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 92
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 92
                file: 
                value: config_hash
              - !ruby/object:Puppet::Parser::AST::String
                line: 92
                file: 
                value: bootstrap_expect
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 96
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 93
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 93
                file: 
                value: bootstrap_expect_hash
              value: !ruby/object:Puppet::Parser::AST::ASTHash
                line: 95
                file: 
                value: 
                  ? !ruby/object:Puppet::Parser::AST::String
                    line: 94
                    file: 
                    value: bootstrap_expect
                  : !ruby/object:Puppet::Parser::AST::ArithmeticOperator
                    line: 95
                    file: 
                    operator: "*"
                    lval: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
                      line: 94
                      file: 
                      variable: config_hash
                      key: !ruby/object:Puppet::Parser::AST::String
                        line: 94
                        file: 
                        value: bootstrap_expect
                    rval: !ruby/object:Puppet::Parser::AST::Name
                      line: 94
                      file: 
                      value: "1"
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 98
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 98
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 97
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 97
                  file: 
                  value: bootstrap_expect_hash
                value: !ruby/object:Puppet::Parser::AST::ASTHash
                  line: 97
                  file: 
                  value: {}
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Relationship
        line: 108
        file: 
        children: []
        left: !ruby/object:Puppet::Parser::AST::Resource
          line: 104
          file: 
          doc: ""
          type: file
          instances: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 104
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                line: 104
                file: 
                title: !ruby/object:Puppet::Parser::AST::Variable
                  line: 100
                  file: 
                  value: "consul::config_dir"
                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 101
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 101
                      file: 
                      param: ensure
                      value: !ruby/object:Puppet::Parser::AST::String
                        line: 101
                        file: 
                        value: directory
                      children: []
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 102
                      file: 
                      param: purge
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 102
                        file: 
                        value: purge
                      children: []
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 103
                      file: 
                      param: recurse
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 103
                        file: 
                        value: purge
                      children: []
                children: []
          children: []
        right: !ruby/object:Puppet::Parser::AST::Resource
          line: 108
          file: 
          doc: ""
          type: file
          instances: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 108
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                line: 108
                file: 
                title: !ruby/object:Puppet::Parser::AST::String
                  line: 105
                  file: 
                  value: config.json
                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 106
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 106
                      file: 
                      param: path
                      value: !ruby/object:Puppet::Parser::AST::Concat
                        line: 106
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 106
                            file: 
                            value: ""
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 106
                            file: 
                            value: "consul::config_dir"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 106
                            file: 
                            value: /config.json
                      children: []
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 107
                      file: 
                      param: content
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 107
                        file: 
                        doc: ""
                        name: consul_sorted_json
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 107
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 107
                              file: 
                              doc: ""
                              name: merge
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 107
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 107
                                    file: 
                                    value: config_hash
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 107
                                    file: 
                                    value: bootstrap_expect_hash
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 107
                                    file: 
                                    value: protocol_hash
                              children: []
                        children: []
                      children: []
                children: []
          children: []
        arrow: "->"
  doc: "== Class consul::config\n\nThis class is called from consul::init to install the config file.\n\n== Parameters\n\n[*config_hash*]\n  Hash for Consul to be deployed as JSON\n\n[*purge*]\n  Bool. If set will make puppet remove stale config files.\n\n"
  line: 13
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: consul
  namespace: consul
  arguments: 
    manage_user: !ruby/object:Puppet::Parser::AST::Boolean
      line: 37
      file: 
      value: true
    user: !ruby/object:Puppet::Parser::AST::String
      line: 38
      file: 
      value: consul
    manage_group: !ruby/object:Puppet::Parser::AST::Boolean
      line: 39
      file: 
      value: true
    purge_config_dir: !ruby/object:Puppet::Parser::AST::Boolean
      line: 40
      file: 
      value: true
    group: !ruby/object:Puppet::Parser::AST::String
      line: 41
      file: 
      value: consul
    join_wan: !ruby/object:Puppet::Parser::AST::Boolean
      line: 42
      file: 
      value: false
    bin_dir: !ruby/object:Puppet::Parser::AST::String
      line: 43
      file: 
      value: /usr/local/bin
    arch: !ruby/object:Puppet::Parser::AST::Variable
      line: 44
      file: 
      value: "consul::params::arch"
    version: !ruby/object:Puppet::Parser::AST::Variable
      line: 45
      file: 
      value: "consul::params::version"
    install_method: !ruby/object:Puppet::Parser::AST::Variable
      line: 46
      file: 
      value: "consul::params::install_method"
    os: !ruby/object:Puppet::Parser::AST::Variable
      line: 47
      file: 
      value: "consul::params::os"
    download_url: !ruby/object:Puppet::Parser::AST::Concat
      line: 48
      file: 
      value: 
        - !ruby/object:Puppet::Parser::AST::String
          line: 48
          file: 
          value: "https://dl.bintray.com/mitchellh/consul/"
        - !ruby/object:Puppet::Parser::AST::Variable
          line: 48
          file: 
          value: version
        - !ruby/object:Puppet::Parser::AST::String
          line: 48
          file: 
          value: "_"
        - !ruby/object:Puppet::Parser::AST::Variable
          line: 48
          file: 
          value: os
        - !ruby/object:Puppet::Parser::AST::String
          line: 48
          file: 
          value: "_"
        - !ruby/object:Puppet::Parser::AST::Variable
          line: 48
          file: 
          value: arch
        - !ruby/object:Puppet::Parser::AST::String
          line: 48
          file: 
          value: ".zip"
    package_name: !ruby/object:Puppet::Parser::AST::Variable
      line: 49
      file: 
      value: "consul::params::package_name"
    package_ensure: !ruby/object:Puppet::Parser::AST::Variable
      line: 50
      file: 
      value: "consul::params::package_ensure"
    ui_download_url: !ruby/object:Puppet::Parser::AST::Concat
      line: 51
      file: 
      value: 
        - !ruby/object:Puppet::Parser::AST::String
          line: 51
          file: 
          value: "https://dl.bintray.com/mitchellh/consul/"
        - !ruby/object:Puppet::Parser::AST::Variable
          line: 51
          file: 
          value: version
        - !ruby/object:Puppet::Parser::AST::String
          line: 51
          file: 
          value: "_web_ui.zip"
    ui_package_name: !ruby/object:Puppet::Parser::AST::Variable
      line: 52
      file: 
      value: "consul::params::ui_package_name"
    ui_package_ensure: !ruby/object:Puppet::Parser::AST::Variable
      line: 53
      file: 
      value: "consul::params::ui_package_ensure"
    config_dir: !ruby/object:Puppet::Parser::AST::String
      line: 54
      file: 
      value: /etc/consul
    extra_options: !ruby/object:Puppet::Parser::AST::String
      line: 55
      file: 
      value: ""
    config_hash: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 56
      file: 
      value: {}
    config_defaults: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 57
      file: 
      value: {}
    service_enable: !ruby/object:Puppet::Parser::AST::Boolean
      line: 58
      file: 
      value: true
    service_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 59
      file: 
      value: running
    manage_service: !ruby/object:Puppet::Parser::AST::Boolean
      line: 60
      file: 
      value: true
    init_style: !ruby/object:Puppet::Parser::AST::Variable
      line: 61
      file: 
      value: "consul::params::init_style"
    services: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 62
      file: 
      value: {}
    watches: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 63
      file: 
      value: {}
    checks: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 64
      file: 
      value: {}
    acls: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 65
      file: 
      value: {}
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 69
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 68
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 68
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 68
              file: 
              value: purge_config_dir
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 69
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 69
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 69
              file: 
              value: manage_user
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 70
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 70
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 70
              file: 
              value: manage_service
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 71
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 71
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 71
              file: 
              value: config_hash
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 72
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 72
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 72
              file: 
              value: config_defaults
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 73
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 73
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 73
              file: 
              value: services
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 74
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 74
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 74
              file: 
              value: watches
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 75
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 75
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 75
              file: 
              value: checks
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 76
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 76
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 76
              file: 
              value: acls
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 78
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 78
          file: 
          value: config_hash_real
        value: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 78
          file: 
          doc: ""
          name: merge
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 78
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 78
                file: 
                value: config_defaults
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 78
                file: 
                value: config_hash
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 79
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 79
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 79
              file: 
              value: config_hash_real
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 85
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
          line: 81
          file: 
          variable: config_hash_real
          key: !ruby/object:Puppet::Parser::AST::String
            line: 81
            file: 
            value: data_dir
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 83
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 82
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 82
                file: 
                value: data_dir
              value: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
                line: 82
                file: 
                variable: config_hash_real
                key: !ruby/object:Puppet::Parser::AST::String
                  line: 82
                  file: 
                  value: data_dir
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 89
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
          line: 85
          file: 
          variable: config_hash_real
          key: !ruby/object:Puppet::Parser::AST::String
            line: 85
            file: 
            value: ui_dir
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 87
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 86
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 86
                file: 
                value: ui_dir
              value: !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
                line: 86
                file: 
                variable: config_hash_real
                key: !ruby/object:Puppet::Parser::AST::String
                  line: 86
                  file: 
                  value: ui_dir
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 93
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 89
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 89
            file: 
            value: ui_dir
          rval: !ruby/object:Puppet::Parser::AST::Not
            line: 89
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 89
              file: 
              value: data_dir
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 91
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 90
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 90
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 90
                    file: 
                    value: "data_dir must be set to install consul web ui"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 97
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 93
          file: 
          value: services
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 95
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 94
              file: 
              doc: ""
              name: create_resources
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 94
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Name
                    line: 94
                    file: 
                    value: "consul::service"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 94
                    file: 
                    value: services
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 101
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 97
          file: 
          value: watches
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 99
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 98
              file: 
              doc: ""
              name: create_resources
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 98
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Name
                    line: 98
                    file: 
                    value: "consul::watch"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 98
                    file: 
                    value: watches
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 105
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 101
          file: 
          value: checks
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 103
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 102
              file: 
              doc: ""
              name: create_resources
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 102
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Name
                    line: 102
                    file: 
                    value: "consul::check"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 102
                    file: 
                    value: checks
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 109
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 105
          file: 
          value: acls
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 107
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 106
              file: 
              doc: ""
              name: create_resources
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 106
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Name
                    line: 106
                    file: 
                    value: consul_acl
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 106
                    file: 
                    value: acls
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Relationship
        line: 118
        file: 
        children: []
        left: !ruby/object:Puppet::Parser::AST::Relationship
          line: 116
          file: 
          children: []
          left: !ruby/object:Puppet::Parser::AST::Relationship
            line: 115
            file: 
            children: []
            left: !ruby/object:Puppet::Parser::AST::Relationship
              line: 111
              file: 
              children: []
              left: !ruby/object:Puppet::Parser::AST::Resource
                line: 109
                file: 
                doc: ""
                type: anchor
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 109
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 109
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::String
                        line: 109
                        file: 
                        value: consul_first
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 109
                        file: 
                        children: []
                      children: []
                children: []
              right: !ruby/object:Puppet::Parser::AST::Resource
                line: 111
                file: 
                doc: ""
                type: class
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 111
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 111
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::String
                        line: 111
                        file: 
                        value: "consul::install"
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 111
                        file: 
                        children: []
                      children: []
                children: []
              arrow: "->"
            right: !ruby/object:Puppet::Parser::AST::Resource
              line: 115
              file: 
              doc: ""
              type: class
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 115
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 115
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::String
                      line: 112
                      file: 
                      value: "consul::config"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 113
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 113
                          file: 
                          param: config_hash
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 113
                            file: 
                            value: config_hash_real
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 114
                          file: 
                          param: purge
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 114
                            file: 
                            value: purge_config_dir
                          children: []
                    children: []
              children: []
            arrow: "->"
          right: !ruby/object:Puppet::Parser::AST::Resource
            line: 116
            file: 
            doc: ""
            type: class
            instances: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 116
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceInstance
                  line: 116
                  file: 
                  title: !ruby/object:Puppet::Parser::AST::String
                    line: 116
                    file: 
                    value: "consul::run_service"
                  parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 116
                    file: 
                    children: []
                  children: []
            children: []
          arrow: "~>"
        right: !ruby/object:Puppet::Parser::AST::Resource
          line: 118
          file: 
          doc: ""
          type: anchor
          instances: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 118
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                line: 118
                file: 
                title: !ruby/object:Puppet::Parser::AST::String
                  line: 118
                  file: 
                  value: consul_last
                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 118
                  file: 
                  children: []
                children: []
          children: []
        arrow: "->"
  doc: "== Class: consul\n\nInstalls, configures, and manages consul\n\n=== Parameters\n\n[*version*]\n  Specify version of consul binary to download.\n\n[*config_hash*]\n  Use this to populate the JSON config file for consul.\n\n[*install_method*]\n  Defaults to `url` but can be `package` if you want to install via a system package.\n\n[*package_name*]\n  Only valid when the install_method == package. Defaults to `consul`.\n\n[*package_ensure*]\n  Only valid when the install_method == package. Defaults to `latest`.\n\n[*ui_package_name*]\n  Only valid when the install_method == package. Defaults to `consul_ui`.\n\n[*ui_package_ensure*]\n  Only valid when the install_method == package. Defaults to `latest`.\n\n[*extra_options*]\n  Extra arguments to be passed to the consul agent\n\n[*init_style*]\n  What style of init system your system uses.\n\n[*purge_config_dir*]\n  Purge config files no longer generated by Puppet\n"
  line: 36
  parent: "consul::params"
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: "consul::install"
  namespace: "consul::install"
  arguments: {}
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 16
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 16
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 7
          file: 
          value: "consul::data_dir"
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 14
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 13
              file: 
              doc: ""
              type: file
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 13
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 13
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 8
                      file: 
                      value: "consul::data_dir"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 9
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 9
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 9
                            file: 
                            value: directory
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 10
                          file: 
                          param: owner
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 10
                            file: 
                            value: "consul::user"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 11
                          file: 
                          param: group
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 11
                            file: 
                            value: "consul::group"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 12
                          file: 
                          param: mode
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 12
                            file: 
                            value: "0755"
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 66
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 16
          file: 
          operator: "=="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 16
            file: 
            value: "consul::install_method"
          rval: !ruby/object:Puppet::Parser::AST::String
            line: 16
            file: 
            value: url
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 21
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 21
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                line: 18
                file: 
                operator: "!="
                lval: !ruby/object:Puppet::Parser::AST::Variable
                  line: 18
                  file: 
                  value: "::operatingsystem"
                rval: !ruby/object:Puppet::Parser::AST::String
                  line: 18
                  file: 
                  value: darwin
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 20
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym statement
                    line: 19
                    file: 
                    doc: ""
                    name: ensure_packages
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 19
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 19
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 19
                              file: 
                              value: unzip
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::Relationship
              line: 32
              file: 
              children: []
              left: !ruby/object:Puppet::Parser::AST::Relationship
                line: 27
                file: 
                children: []
                left: !ruby/object:Puppet::Parser::AST::Resource
                  line: 23
                  file: 
                  doc: ""
                  type: "staging::file"
                  instances: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 23
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceInstance
                        line: 23
                        file: 
                        title: !ruby/object:Puppet::Parser::AST::String
                          line: 21
                          file: 
                          value: consul.zip
                        parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 23
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ResourceParam
                              line: 22
                              file: 
                              param: source
                              value: !ruby/object:Puppet::Parser::AST::Variable
                                line: 22
                                file: 
                                value: "consul::download_url"
                              children: []
                        children: []
                  children: []
                right: !ruby/object:Puppet::Parser::AST::Resource
                  line: 27
                  file: 
                  doc: ""
                  type: "staging::extract"
                  instances: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 27
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceInstance
                        line: 27
                        file: 
                        title: !ruby/object:Puppet::Parser::AST::String
                          line: 24
                          file: 
                          value: consul.zip
                        parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 25
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ResourceParam
                              line: 25
                              file: 
                              param: target
                              value: !ruby/object:Puppet::Parser::AST::Variable
                                line: 25
                                file: 
                                value: "consul::bin_dir"
                              children: []
                            - !ruby/object:Puppet::Parser::AST::ResourceParam
                              line: 26
                              file: 
                              param: creates
                              value: !ruby/object:Puppet::Parser::AST::Concat
                                line: 26
                                file: 
                                value: 
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 26
                                    file: 
                                    value: ""
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 26
                                    file: 
                                    value: "consul::bin_dir"
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 26
                                    file: 
                                    value: /consul
                              children: []
                        children: []
                  children: []
                arrow: "->"
              right: !ruby/object:Puppet::Parser::AST::Resource
                line: 32
                file: 
                doc: ""
                type: file
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 32
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 32
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::Concat
                        line: 28
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 28
                            file: 
                            value: ""
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 28
                            file: 
                            value: "consul::bin_dir"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 28
                            file: 
                            value: /consul
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 29
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 29
                            file: 
                            param: owner
                            value: !ruby/object:Puppet::Parser::AST::String
                              line: 29
                              file: 
                              value: root
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 30
                            file: 
                            param: group
                            value: !ruby/object:Puppet::Parser::AST::Name
                              line: 30
                              file: 
                              value: "0"
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 31
                            file: 
                            param: mode
                            value: !ruby/object:Puppet::Parser::AST::String
                              line: 31
                              file: 
                              value: "0555"
                            children: []
                      children: []
                children: []
              arrow: "->"
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 52
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::BooleanOperator
                line: 34
                file: 
                operator: and
                lval: !ruby/object:Puppet::Parser::AST::Variable
                  line: 34
                  file: 
                  value: "consul::ui_dir"
                rval: !ruby/object:Puppet::Parser::AST::Variable
                  line: 34
                  file: 
                  value: "consul::data_dir"
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 46
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Relationship
                    line: 45
                    file: 
                    children: []
                    left: !ruby/object:Puppet::Parser::AST::Resource
                      line: 40
                      file: 
                      doc: ""
                      type: file
                      instances: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 40
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceInstance
                            line: 40
                            file: 
                            title: !ruby/object:Puppet::Parser::AST::Concat
                              line: 35
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 35
                                  file: 
                                  value: ""
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 35
                                  file: 
                                  value: "consul::data_dir"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 35
                                  file: 
                                  value: /
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 35
                                  file: 
                                  value: "consul::version"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 35
                                  file: 
                                  value: "_web_ui"
                            parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 36
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 36
                                  file: 
                                  param: ensure
                                  value: !ruby/object:Puppet::Parser::AST::String
                                    line: 36
                                    file: 
                                    value: directory
                                  children: []
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 37
                                  file: 
                                  param: owner
                                  value: !ruby/object:Puppet::Parser::AST::String
                                    line: 37
                                    file: 
                                    value: root
                                  children: []
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 38
                                  file: 
                                  param: group
                                  value: !ruby/object:Puppet::Parser::AST::Name
                                    line: 38
                                    file: 
                                    value: "0"
                                  children: []
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 39
                                  file: 
                                  param: mode
                                  value: !ruby/object:Puppet::Parser::AST::String
                                    line: 39
                                    file: 
                                    value: "0755"
                                  children: []
                            children: []
                      children: []
                    right: !ruby/object:Puppet::Parser::AST::Resource
                      line: 45
                      file: 
                      doc: ""
                      type: "staging::deploy"
                      instances: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 45
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceInstance
                            line: 45
                            file: 
                            title: !ruby/object:Puppet::Parser::AST::String
                              line: 41
                              file: 
                              value: consul_web_ui.zip
                            parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 42
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 42
                                  file: 
                                  param: source
                                  value: !ruby/object:Puppet::Parser::AST::Variable
                                    line: 42
                                    file: 
                                    value: "consul::ui_download_url"
                                  children: []
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 43
                                  file: 
                                  param: target
                                  value: !ruby/object:Puppet::Parser::AST::Concat
                                    line: 43
                                    file: 
                                    value: 
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 43
                                        file: 
                                        value: ""
                                      - !ruby/object:Puppet::Parser::AST::Variable
                                        line: 43
                                        file: 
                                        value: "consul::data_dir"
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 43
                                        file: 
                                        value: /
                                      - !ruby/object:Puppet::Parser::AST::Variable
                                        line: 43
                                        file: 
                                        value: "consul::version"
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 43
                                        file: 
                                        value: "_web_ui"
                                  children: []
                                - !ruby/object:Puppet::Parser::AST::ResourceParam
                                  line: 44
                                  file: 
                                  param: creates
                                  value: !ruby/object:Puppet::Parser::AST::Concat
                                    line: 44
                                    file: 
                                    value: 
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 44
                                        file: 
                                        value: ""
                                      - !ruby/object:Puppet::Parser::AST::Variable
                                        line: 44
                                        file: 
                                        value: "consul::data_dir"
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 44
                                        file: 
                                        value: /
                                      - !ruby/object:Puppet::Parser::AST::Variable
                                        line: 44
                                        file: 
                                        value: "consul::version"
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 44
                                        file: 
                                        value: "_web_ui/dist"
                                  children: []
                            children: []
                      children: []
                    arrow: "->"
                  - !ruby/object:Puppet::Parser::AST::Resource
                    line: 49
                    file: 
                    doc: ""
                    type: file
                    instances: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 49
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceInstance
                          line: 49
                          file: 
                          title: !ruby/object:Puppet::Parser::AST::Variable
                            line: 46
                            file: 
                            value: "consul::ui_dir"
                          parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 47
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceParam
                                line: 47
                                file: 
                                param: ensure
                                value: !ruby/object:Puppet::Parser::AST::String
                                  line: 47
                                  file: 
                                  value: symlink
                                children: []
                              - !ruby/object:Puppet::Parser::AST::ResourceParam
                                line: 48
                                file: 
                                param: target
                                value: !ruby/object:Puppet::Parser::AST::Concat
                                  line: 48
                                  file: 
                                  value: 
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 48
                                      file: 
                                      value: ""
                                    - !ruby/object:Puppet::Parser::AST::Variable
                                      line: 48
                                      file: 
                                      value: "consul::data_dir"
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 48
                                      file: 
                                      value: /
                                    - !ruby/object:Puppet::Parser::AST::Variable
                                      line: 48
                                      file: 
                                      value: "consul::version"
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 48
                                      file: 
                                      value: "_web_ui/dist"
                                children: []
                          children: []
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 66
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 66
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
              line: 52
              file: 
              operator: "=="
              lval: !ruby/object:Puppet::Parser::AST::Variable
                line: 52
                file: 
                value: "consul::install_method"
              rval: !ruby/object:Puppet::Parser::AST::String
                line: 52
                file: 
                value: package
              children: []
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 58
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Resource
                  line: 56
                  file: 
                  doc: ""
                  type: package
                  instances: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 56
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceInstance
                        line: 56
                        file: 
                        title: !ruby/object:Puppet::Parser::AST::Variable
                          line: 54
                          file: 
                          value: "consul::package_name"
                        parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 55
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ResourceParam
                              line: 55
                              file: 
                              param: ensure
                              value: !ruby/object:Puppet::Parser::AST::Variable
                                line: 55
                                file: 
                                value: "consul::package_ensure"
                              children: []
                        children: []
                  children: []
                - !ruby/object:Puppet::Parser::AST::IfStatement
                  line: 64
                  file: 
                  doc: ""
                  test: !ruby/object:Puppet::Parser::AST::Variable
                    line: 58
                    file: 
                    value: "consul::ui_dir"
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 62
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Resource
                        line: 61
                        file: 
                        doc: ""
                        type: package
                        instances: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 61
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ResourceInstance
                              line: 61
                              file: 
                              title: !ruby/object:Puppet::Parser::AST::Variable
                                line: 59
                                file: 
                                value: "consul::ui_package_name"
                              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 60
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                                    line: 60
                                    file: 
                                    param: ensure
                                    value: !ruby/object:Puppet::Parser::AST::Variable
                                      line: 60
                                      file: 
                                      value: "consul::ui_package_ensure"
                                    children: []
                              children: []
                        children: []
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 66
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 66
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym statement
                    line: 65
                    file: 
                    doc: ""
                    name: fail
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 65
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Concat
                          line: 65
                          file: 
                          value: 
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 65
                              file: 
                              value: "The provided install method "
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 65
                              file: 
                              value: "consul::install_method"
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 65
                              file: 
                              value: " is invalid"
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 73
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 68
          file: 
          value: "consul::manage_user"
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 72
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 71
              file: 
              doc: ""
              type: user
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 71
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 71
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 69
                      file: 
                      value: "consul::user"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 70
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 70
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 70
                            file: 
                            value: present
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 78
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 73
          file: 
          value: "consul::manage_group"
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 77
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 76
              file: 
              doc: ""
              type: group
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 76
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 76
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 74
                      file: 
                      value: "consul::group"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 75
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 75
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 75
                            file: 
                            value: present
                          children: []
                    children: []
              children: []
        children: []
  doc: "== Class consul::intall\n\nInstalls consule based in the parameters from init\n\n"
  line: 5
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: "consul::params"
  namespace: "consul::params"
  arguments: {}
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 9
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 8
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 8
          file: 
          value: install_method
        value: !ruby/object:Puppet::Parser::AST::String
          line: 8
          file: 
          value: url
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 9
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 9
          file: 
          value: package_name
        value: !ruby/object:Puppet::Parser::AST::String
          line: 9
          file: 
          value: consul
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 10
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 10
          file: 
          value: package_ensure
        value: !ruby/object:Puppet::Parser::AST::String
          line: 10
          file: 
          value: latest
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 11
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 11
          file: 
          value: ui_package_name
        value: !ruby/object:Puppet::Parser::AST::String
          line: 11
          file: 
          value: consul_ui
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 12
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 12
          file: 
          value: ui_package_ensure
        value: !ruby/object:Puppet::Parser::AST::String
          line: 12
          file: 
          value: latest
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 13
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 13
          file: 
          value: version
        value: !ruby/object:Puppet::Parser::AST::String
          line: 13
          file: 
          value: "0.5.0"
        children: []
      - !ruby/object:Puppet::Parser::AST::CaseStatement
        line: 21
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 15
          file: 
          value: "::architecture"
        options: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 16
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 16
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 16
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 16
                    file: 
                    value: x86_64
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 16
                    file: 
                    value: amd64
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 16
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 16
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 16
                      file: 
                      value: arch
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 16
                      file: 
                      value: amd64
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 17
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 17
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 17
                    file: 
                    value: i386
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 17
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 17
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 17
                      file: 
                      value: arch
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 17
                      file: 
                      value: "386"
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 20
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 18
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Default
                    line: 18
                    file: 
                    value: default
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 20
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym statement
                    line: 19
                    file: 
                    doc: ""
                    name: fail
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 19
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Concat
                          line: 19
                          file: 
                          value: 
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 19
                              file: 
                              value: "Unsupported kernel architecture: "
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 19
                              file: 
                              value: "::architecture"
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 19
                              file: 
                              value: ""
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 23
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 23
          file: 
          value: os
        value: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 23
          file: 
          doc: ""
          name: downcase
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 23
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 23
                file: 
                value: "::kernel"
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 57
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 25
          file: 
          operator: "=="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 25
            file: 
            value: "::operatingsystem"
          rval: !ruby/object:Puppet::Parser::AST::String
            line: 25
            file: 
            value: Ubuntu
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 30
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 30
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                line: 26
                file: 
                operator: "<"
                lval: !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 26
                  file: 
                  doc: ""
                  name: versioncmp
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 26
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 26
                        file: 
                        value: "::lsbdistrelease"
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 26
                        file: 
                        value: "8.04"
                  children: []
                rval: !ruby/object:Puppet::Parser::AST::Name
                  line: 26
                  file: 
                  value: "1"
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 28
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 27
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 27
                      file: 
                      value: init_style
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 27
                      file: 
                      value: debian
                    children: []
              children: []
              else: !ruby/object:Puppet::Parser::AST::Else
                line: 30
                file: 
                doc: ""
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 30
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 29
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 29
                        file: 
                        value: init_style
                      value: !ruby/object:Puppet::Parser::AST::String
                        line: 29
                        file: 
                        value: upstart
                      children: []
                children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 57
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 57
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::MatchOperator
              line: 31
              file: 
              operator: "=~"
              lval: !ruby/object:Puppet::Parser::AST::Variable
                line: 31
                file: 
                value: "::operatingsystem"
              rval: !ruby/object:Puppet::Parser::AST::Regex
                line: 31
                file: 
                value: !ruby/regexp /Scientific|CentOS|RedHat|OracleLinux/
              children: []
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 36
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::IfStatement
                  line: 36
                  file: 
                  doc: ""
                  test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                    line: 32
                    file: 
                    operator: "<"
                    lval: !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym rvalue
                      line: 32
                      file: 
                      doc: ""
                      name: versioncmp
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 32
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 32
                            file: 
                            value: "::operatingsystemrelease"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 32
                            file: 
                            value: "7.0"
                      children: []
                    rval: !ruby/object:Puppet::Parser::AST::Name
                      line: 32
                      file: 
                      value: "0"
                    children: []
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 34
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 33
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 33
                          file: 
                          value: init_style
                        value: !ruby/object:Puppet::Parser::AST::String
                          line: 33
                          file: 
                          value: sysv
                        children: []
                  children: []
                  else: !ruby/object:Puppet::Parser::AST::Else
                    line: 36
                    file: 
                    doc: ""
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 36
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::VarDef
                          line: 35
                          file: 
                          doc: ""
                          name: !ruby/object:Puppet::Parser::AST::Name
                            line: 35
                            file: 
                            value: init_style
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 35
                            file: 
                            value: systemd
                          children: []
                    children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 57
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::IfStatement
                line: 57
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                  line: 37
                  file: 
                  operator: "=="
                  lval: !ruby/object:Puppet::Parser::AST::Variable
                    line: 37
                    file: 
                    value: "::operatingsystem"
                  rval: !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: Fedora
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 42
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::IfStatement
                      line: 42
                      file: 
                      doc: ""
                      test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                        line: 38
                        file: 
                        operator: "<"
                        lval: !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 38
                          file: 
                          doc: ""
                          name: versioncmp
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 38
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 38
                                file: 
                                value: "::operatingsystemrelease"
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 38
                                file: 
                                value: "12"
                          children: []
                        rval: !ruby/object:Puppet::Parser::AST::Name
                          line: 38
                          file: 
                          value: "0"
                        children: []
                      statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                        line: 40
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::VarDef
                            line: 39
                            file: 
                            doc: ""
                            name: !ruby/object:Puppet::Parser::AST::Name
                              line: 39
                              file: 
                              value: init_style
                            value: !ruby/object:Puppet::Parser::AST::String
                              line: 39
                              file: 
                              value: sysv
                            children: []
                      children: []
                      else: !ruby/object:Puppet::Parser::AST::Else
                        line: 42
                        file: 
                        doc: ""
                        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                          line: 42
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::VarDef
                              line: 41
                              file: 
                              doc: ""
                              name: !ruby/object:Puppet::Parser::AST::Name
                                line: 41
                                file: 
                                value: init_style
                              value: !ruby/object:Puppet::Parser::AST::String
                                line: 41
                                file: 
                                value: systemd
                              children: []
                        children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 57
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 57
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                      line: 43
                      file: 
                      operator: "=="
                      lval: !ruby/object:Puppet::Parser::AST::Variable
                        line: 43
                        file: 
                        value: "::operatingsystem"
                      rval: !ruby/object:Puppet::Parser::AST::String
                        line: 43
                        file: 
                        value: Debian
                      children: []
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 48
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::IfStatement
                          line: 48
                          file: 
                          doc: ""
                          test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                            line: 44
                            file: 
                            operator: "<"
                            lval: !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 44
                              file: 
                              doc: ""
                              name: versioncmp
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 44
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 44
                                    file: 
                                    value: "::operatingsystemrelease"
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 44
                                    file: 
                                    value: "8.0"
                              children: []
                            rval: !ruby/object:Puppet::Parser::AST::Name
                              line: 44
                              file: 
                              value: "0"
                            children: []
                          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                            line: 46
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::VarDef
                                line: 45
                                file: 
                                doc: ""
                                name: !ruby/object:Puppet::Parser::AST::Name
                                  line: 45
                                  file: 
                                  value: init_style
                                value: !ruby/object:Puppet::Parser::AST::String
                                  line: 45
                                  file: 
                                  value: debian
                                children: []
                          children: []
                          else: !ruby/object:Puppet::Parser::AST::Else
                            line: 48
                            file: 
                            doc: ""
                            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                              line: 48
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::VarDef
                                  line: 47
                                  file: 
                                  doc: ""
                                  name: !ruby/object:Puppet::Parser::AST::Name
                                    line: 47
                                    file: 
                                    value: init_style
                                  value: !ruby/object:Puppet::Parser::AST::String
                                    line: 47
                                    file: 
                                    value: systemd
                                  children: []
                            children: []
                    children: []
                    else: !ruby/object:Puppet::Parser::AST::Else
                      line: 57
                      file: 
                      doc: ""
                      statements: !ruby/object:Puppet::Parser::AST::IfStatement
                        line: 57
                        file: 
                        doc: ""
                        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                          line: 49
                          file: 
                          operator: "=="
                          lval: !ruby/object:Puppet::Parser::AST::Variable
                            line: 49
                            file: 
                            value: "::operatingsystem"
                          rval: !ruby/object:Puppet::Parser::AST::String
                            line: 49
                            file: 
                            value: SLES
                          children: []
                        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                          line: 51
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::VarDef
                              line: 50
                              file: 
                              doc: ""
                              name: !ruby/object:Puppet::Parser::AST::Name
                                line: 50
                                file: 
                                value: init_style
                              value: !ruby/object:Puppet::Parser::AST::String
                                line: 50
                                file: 
                                value: sles
                              children: []
                        children: []
                        else: !ruby/object:Puppet::Parser::AST::Else
                          line: 57
                          file: 
                          doc: ""
                          statements: !ruby/object:Puppet::Parser::AST::IfStatement
                            line: 57
                            file: 
                            doc: ""
                            test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                              line: 51
                              file: 
                              operator: "=="
                              lval: !ruby/object:Puppet::Parser::AST::Variable
                                line: 51
                                file: 
                                value: "::operatingsystem"
                              rval: !ruby/object:Puppet::Parser::AST::String
                                line: 51
                                file: 
                                value: Darwin
                              children: []
                            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                              line: 53
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::VarDef
                                  line: 52
                                  file: 
                                  doc: ""
                                  name: !ruby/object:Puppet::Parser::AST::Name
                                    line: 52
                                    file: 
                                    value: init_style
                                  value: !ruby/object:Puppet::Parser::AST::String
                                    line: 52
                                    file: 
                                    value: launchd
                                  children: []
                            children: []
                            else: !ruby/object:Puppet::Parser::AST::Else
                              line: 57
                              file: 
                              doc: ""
                              statements: !ruby/object:Puppet::Parser::AST::IfStatement
                                line: 57
                                file: 
                                doc: ""
                                test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                                  line: 53
                                  file: 
                                  operator: "=="
                                  lval: !ruby/object:Puppet::Parser::AST::Variable
                                    line: 53
                                    file: 
                                    value: "::operatingsystem"
                                  rval: !ruby/object:Puppet::Parser::AST::String
                                    line: 53
                                    file: 
                                    value: Amazon
                                  children: []
                                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                                  line: 55
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::VarDef
                                      line: 54
                                      file: 
                                      doc: ""
                                      name: !ruby/object:Puppet::Parser::AST::Name
                                        line: 54
                                        file: 
                                        value: init_style
                                      value: !ruby/object:Puppet::Parser::AST::String
                                        line: 54
                                        file: 
                                        value: sysv
                                      children: []
                                children: []
                                else: !ruby/object:Puppet::Parser::AST::Else
                                  line: 57
                                  file: 
                                  doc: ""
                                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                                    line: 57
                                    file: 
                                    children: 
                                      - !ruby/object:Puppet::Parser::AST::VarDef
                                        line: 56
                                        file: 
                                        doc: ""
                                        name: !ruby/object:Puppet::Parser::AST::Name
                                          line: 56
                                          file: 
                                          value: init_style
                                        value: !ruby/object:Puppet::Parser::AST::Undef
                                          line: 56
                                          file: 
                                          value: !ruby/sym undef
                                        children: []
                                  children: []
                              children: []
                          children: []
                      children: []
                  children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 61
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 58
          file: 
          operator: "=="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 58
            file: 
            value: init_style
          rval: !ruby/object:Puppet::Parser::AST::Undef
            line: 58
            file: 
            value: !ruby/sym undef
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 60
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 59
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 59
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 59
                    file: 
                    value: "Unsupported OS"
              children: []
        children: []
  doc: "== Class consul::params\n\nThis class is meant to be called from consul\nIt sets variables according to platform\n\n"
  line: 6
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "consul::put_key_value"
  namespace: consul
  arguments: 
    name: !ruby/object:Puppet::Parser::AST::String
      line: 2
      file: 
      value: ""
    value: !ruby/object:Puppet::Parser::AST::String
      line: 3
      file: 
      value: ""
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 13
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::CaseStatement
        line: 12
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 5
          file: 
          value: "::osfamily"
        options: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 8
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 8
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 6
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Default
                    line: 6
                    file: 
                    value: default
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 8
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 7
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 7
                      file: 
                      value: exec_path
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 7
                      file: 
                      value: "/usr/local/bin:/usr/bin:/bin:/sbin"
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 11
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 9
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 9
                    file: 
                    value: Solaris
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 11
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 10
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 10
                      file: 
                      value: exec_path
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 10
                      file: 
                      value: "/usr/local/bin:/usr/bin:/bin:/usr/sfw/bin"
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 13
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 13
          file: 
          value: command
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 13
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 13
              file: 
              value: "curl -X PUT -d '"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 13
              file: 
              value: value
            - !ruby/object:Puppet::Parser::AST::String
              line: 13
              file: 
              value: "' http://localhost:8500/v1/kv/"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 13
              file: 
              value: name
            - !ruby/object:Puppet::Parser::AST::String
              line: 13
              file: 
              value: ""
        children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 18
        file: 
        doc: ""
        type: exec
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 18
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 18
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 14
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 14
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 14
                    file: 
                    value: name
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 14
                    file: 
                    value: "_"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 14
                    file: 
                    value: command
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 14
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 15
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 15
                    file: 
                    param: command
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 15
                      file: 
                      value: command
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 16
                    file: 
                    param: path
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 16
                      file: 
                      value: exec_path
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 17
                    file: 
                    param: provider
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 17
                      file: 
                      value: shell
                    children: []
              children: []
        children: []
  doc: ""
  line: 1
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: "consul::run_service"
  namespace: "consul::run_service"
  arguments: {}
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 13
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 8
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 8
          file: 
          value: init_selector
        value: !ruby/object:Puppet::Parser::AST::Selector
          line: 11
          file: 
          param: !ruby/object:Puppet::Parser::AST::Variable
            line: 8
            file: 
            value: "consul::init_style"
          values: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 10
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ResourceParam
                line: 9
                file: 
                param: !ruby/object:Puppet::Parser::AST::String
                  line: 9
                  file: 
                  value: launchd
                value: !ruby/object:Puppet::Parser::AST::String
                  line: 9
                  file: 
                  value: io.consul.daemon
                children: []
              - !ruby/object:Puppet::Parser::AST::ResourceParam
                line: 10
                file: 
                param: !ruby/object:Puppet::Parser::AST::Default
                  line: 10
                  file: 
                  value: default
                value: !ruby/object:Puppet::Parser::AST::String
                  line: 10
                  file: 
                  value: consul
                children: []
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 21
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 13
          file: 
          operator: "=="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 13
            file: 
            value: "consul::manage_service"
          rval: !ruby/object:Puppet::Parser::AST::Boolean
            line: 13
            file: 
            value: true
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 19
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 18
              file: 
              doc: ""
              type: service
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 18
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 18
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::String
                      line: 14
                      file: 
                      value: consul
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 15
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 15
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 15
                            file: 
                            value: "consul::service_ensure"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 16
                          file: 
                          param: name
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 16
                            file: 
                            value: init_selector
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 17
                          file: 
                          param: enable
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 17
                            file: 
                            value: "consul::service_enable"
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 31
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 21
          file: 
          value: "consul::join_wan"
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 29
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 28
              file: 
              doc: ""
              type: exec
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 28
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 28
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::String
                      line: 22
                      file: 
                      value: "join consul wan"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 23
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 23
                          file: 
                          param: cwd
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 23
                            file: 
                            value: "consul::config_dir"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 24
                          file: 
                          param: path
                          value: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 24
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 24
                                file: 
                                value: "consul::bin_dir"
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 24
                                file: 
                                value: /bin
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 24
                                file: 
                                value: /usr/bin
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 25
                          file: 
                          param: command
                          value: !ruby/object:Puppet::Parser::AST::Concat
                            line: 25
                            file: 
                            value: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 25
                                file: 
                                value: "consul join -wan "
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 25
                                file: 
                                value: "consul::join_wan"
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 25
                                file: 
                                value: ""
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 26
                          file: 
                          param: unless
                          value: !ruby/object:Puppet::Parser::AST::Concat
                            line: 26
                            file: 
                            value: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 26
                                file: 
                                value: "consul members -wan -detailed | grep -vP \x22dc="
                              - !ruby/object:Puppet::Parser::AST::HashOrArrayAccess
                                line: 26
                                file: 
                                variable: "consul::config_hash_real"
                                key: !ruby/object:Puppet::Parser::AST::String
                                  line: 26
                                  file: 
                                  value: datacenter
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 26
                                file: 
                                value: "\x22 | grep -P 'alive'"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 27
                          file: 
                          param: subscribe
                          value: !ruby/object:Puppet::Parser::AST::ResourceReference
                            line: 27
                            file: 
                            type: Service
                            title: !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 27
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 27
                                  file: 
                                  value: consul
                            children: []
                          children: []
                    children: []
              children: []
        children: []
  doc: "== Class consul::service\n\nThis class is meant to be called from consul\nIt ensure the service is running\n\n"
  line: 6
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "consul::service"
  namespace: consul
  arguments: 
    service_name: !ruby/object:Puppet::Parser::AST::Variable
      line: 27
      file: 
      value: title
    id: !ruby/object:Puppet::Parser::AST::Variable
      line: 28
      file: 
      value: title
    tags: !ruby/object:Puppet::Parser::AST::ASTArray
      line: 29
      file: 
      children: []
    address: !ruby/object:Puppet::Parser::AST::Undef
      line: 30
      file: 
      value: !ruby/sym undef
    port: !ruby/object:Puppet::Parser::AST::Undef
      line: 31
      file: 
      value: !ruby/sym undef
    checks: !ruby/object:Puppet::Parser::AST::ASTArray
      line: 32
      file: 
      children: []
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 36
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 34
        file: 
        doc: ""
        name: include
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 36
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Name
              line: 34
              file: 
              value: consul
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 36
        file: 
        doc: ""
        name: consul_validate_checks
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 36
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 36
              file: 
              value: checks
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 38
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 38
          file: 
          value: basic_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 44
          file: 
          value: 
            ? !ruby/object:Puppet::Parser::AST::String
              line: 39
              file: 
              value: id
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 39
              file: 
              value: id
            ? !ruby/object:Puppet::Parser::AST::String
              line: 40
              file: 
              value: name
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 40
              file: 
              value: service_name
            ? !ruby/object:Puppet::Parser::AST::String
              line: 41
              file: 
              value: address
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 41
              file: 
              value: address
            ? !ruby/object:Puppet::Parser::AST::String
              line: 42
              file: 
              value: tags
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 42
              file: 
              value: tags
            ? !ruby/object:Puppet::Parser::AST::String
              line: 43
              file: 
              value: checks
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 43
              file: 
              value: checks
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 53
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 46
          file: 
          value: port
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 51
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 48
              file: 
              doc: "implicit conversion from string to int so it won't be quoted in JSON\n"
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 48
                file: 
                value: port_hash
              value: !ruby/object:Puppet::Parser::AST::ASTHash
                line: 50
                file: 
                value: 
                  port: !ruby/object:Puppet::Parser::AST::ArithmeticOperator
                    line: 50
                    file: 
                    operator: "*"
                    lval: !ruby/object:Puppet::Parser::AST::Variable
                      line: 49
                      file: 
                      value: port
                    rval: !ruby/object:Puppet::Parser::AST::Name
                      line: 49
                      file: 
                      value: "1"
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 53
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 53
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 52
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 52
                  file: 
                  value: port_hash
                value: !ruby/object:Puppet::Parser::AST::ASTHash
                  line: 52
                  file: 
                  value: {}
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 55
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 55
          file: 
          value: service_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 57
          file: 
          value: 
            service: !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym rvalue
              line: 56
              file: 
              doc: ""
              name: delete_undef_values
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 56
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 56
                    file: 
                    doc: ""
                    name: merge
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 56
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 56
                          file: 
                          value: basic_hash
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 56
                          file: 
                          value: port_hash
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Relationship
        line: 62
        file: 
        children: []
        left: !ruby/object:Puppet::Parser::AST::Relationship
          line: 62
          file: 
          children: []
          left: !ruby/object:Puppet::Parser::AST::ResourceReference
            line: 59
            file: 
            type: File
            title: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 59
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 59
                  file: 
                  value: "consul::config_dir"
            children: []
          right: !ruby/object:Puppet::Parser::AST::Resource
            line: 62
            file: 
            doc: ""
            type: file
            instances: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 62
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceInstance
                  line: 62
                  file: 
                  title: !ruby/object:Puppet::Parser::AST::Concat
                    line: 60
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 60
                        file: 
                        value: ""
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 60
                        file: 
                        value: "consul::config_dir"
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 60
                        file: 
                        value: /service_
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 60
                        file: 
                        value: id
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 60
                        file: 
                        value: ".json"
                  parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 61
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceParam
                        line: 61
                        file: 
                        param: content
                        value: !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 61
                          file: 
                          doc: ""
                          name: consul_sorted_json
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 61
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 61
                                file: 
                                value: service_hash
                          children: []
                        children: []
                  children: []
            children: []
          arrow: "->"
        right: !ruby/object:Puppet::Parser::AST::ResourceReference
          line: 62
          file: 
          type: Class
          title: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 62
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::String
                line: 62
                file: 
                value: "consul::run_service"
          children: []
        arrow: "~>"
  doc: "== Define consul::service\n\nSets up a Consul service definition\nhttp://www.consul.io/docs/agent/services.html\n\n== Parameters\n\n[*service_name*]\n  Name of the service. Defaults to title.\n\n[*id*]\n  The unique ID of the service on the node. Defaults to title.\n\n[*tags*]\n  Array of strings.\n\n[*address*]\n  IP address the service is running at.\n\n[*port*]\n  TCP port the service runs on.\n\n[*checks*]\n  If provided an array of checks that will be added to this service\n\n"
  line: 26
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "consul::watch"
  namespace: consul
  arguments: 
    handler: !ruby/object:Puppet::Parser::AST::Undef
      line: 43
      file: 
      value: !ruby/sym undef
    datacenter: !ruby/object:Puppet::Parser::AST::Undef
      line: 44
      file: 
      value: !ruby/sym undef
    token: !ruby/object:Puppet::Parser::AST::Undef
      line: 45
      file: 
      value: !ruby/sym undef
    type: !ruby/object:Puppet::Parser::AST::Undef
      line: 46
      file: 
      value: !ruby/sym undef
    key: !ruby/object:Puppet::Parser::AST::Undef
      line: 47
      file: 
      value: !ruby/sym undef
    keyprefix: !ruby/object:Puppet::Parser::AST::Undef
      line: 48
      file: 
      value: !ruby/sym undef
    service: !ruby/object:Puppet::Parser::AST::Undef
      line: 49
      file: 
      value: !ruby/sym undef
    service_tag: !ruby/object:Puppet::Parser::AST::Undef
      line: 50
      file: 
      value: !ruby/sym undef
    passingonly: !ruby/object:Puppet::Parser::AST::Undef
      line: 51
      file: 
      value: !ruby/sym undef
    state: !ruby/object:Puppet::Parser::AST::Undef
      line: 52
      file: 
      value: !ruby/sym undef
    event_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 53
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 56
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 55
        file: 
        doc: ""
        name: include
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 56
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Name
              line: 55
              file: 
              value: consul
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 56
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 56
          file: 
          value: id
        value: !ruby/object:Puppet::Parser::AST::Variable
          line: 56
          file: 
          value: title
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 58
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 58
          file: 
          value: basic_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 63
          file: 
          value: 
            ? !ruby/object:Puppet::Parser::AST::String
              line: 59
              file: 
              value: type
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 59
              file: 
              value: type
            ? !ruby/object:Puppet::Parser::AST::String
              line: 60
              file: 
              value: handler
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 60
              file: 
              value: handler
            ? !ruby/object:Puppet::Parser::AST::String
              line: 61
              file: 
              value: datacenter
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 61
              file: 
              value: datacenter
            ? !ruby/object:Puppet::Parser::AST::String
              line: 62
              file: 
              value: token
            : !ruby/object:Puppet::Parser::AST::Variable
              line: 62
              file: 
              value: token
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 69
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 65
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 65
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 65
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 65
                  file: 
                  value: "::consul::version"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 65
                  file: 
                  value: "0.4.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 65
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 67
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 66
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 66
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 66
                    file: 
                    value: "Watches are only supported in Consul 0.4.0 and above"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 73
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 69
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 69
            file: 
            value: handler
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 71
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 70
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 70
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 70
                    file: 
                    value: "All watch conditions must have a handler defined"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 77
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 73
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 73
            file: 
            value: type
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 75
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 74
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 74
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 74
                    file: 
                    value: "All watch conditions must have a type defined"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 81
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 77
          file: 
          value: passingonly
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 79
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 78
              file: 
              doc: ""
              name: validate_bool
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 78
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 78
                    file: 
                    value: passingonly
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::CaseStatement
        line: 125
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 81
          file: 
          value: type
        options: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 89
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 89
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 82
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 82
                    file: 
                    value: key
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 86
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 86
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::Not
                      line: 83
                      file: 
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 83
                        file: 
                        value: key
                      children: []
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 85
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym statement
                          line: 84
                          file: 
                          doc: ""
                          name: fail
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 84
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 84
                                file: 
                                value: "key is required for watch type [key]"
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 86
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 86
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 87
                      file: 
                      value: 
                        key: !ruby/object:Puppet::Parser::AST::Variable
                          line: 87
                          file: 
                          value: key
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 97
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 90
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 90
                    file: 
                    value: keyprefix
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 94
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 94
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::Not
                      line: 91
                      file: 
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 91
                        file: 
                        value: keyprefix
                      children: []
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 93
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym statement
                          line: 92
                          file: 
                          doc: ""
                          name: fail
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 92
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 92
                                file: 
                                value: "keyprefix is required for watch type of [keyprefix]"
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 94
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 94
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 95
                      file: 
                      value: 
                        prefix: !ruby/object:Puppet::Parser::AST::Variable
                          line: 95
                          file: 
                          value: keyprefix
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 107
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 98
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 98
                    file: 
                    value: service
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 102
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 102
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::Not
                      line: 99
                      file: 
                      value: !ruby/object:Puppet::Parser::AST::Name
                        line: 99
                        file: 
                        value: service
                      children: []
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 101
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym statement
                          line: 100
                          file: 
                          doc: ""
                          name: fail
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 100
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 100
                                file: 
                                value: "service is required for watch type of [service]"
                          children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 102
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 102
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 105
                      file: 
                      value: 
                        service: !ruby/object:Puppet::Parser::AST::Variable
                          line: 103
                          file: 
                          value: service
                        tag: !ruby/object:Puppet::Parser::AST::Variable
                          line: 104
                          file: 
                          value: service_tag
                        passingonly: !ruby/object:Puppet::Parser::AST::Variable
                          line: 105
                          file: 
                          value: passingonly
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 113
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 108
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 108
                    file: 
                    value: checks
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 113
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 109
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 109
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 112
                      file: 
                      value: 
                        service: !ruby/object:Puppet::Parser::AST::Variable
                          line: 110
                          file: 
                          value: service
                        state: !ruby/object:Puppet::Parser::AST::Variable
                          line: 111
                          file: 
                          value: state
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 118
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 114
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 114
                    file: 
                    value: event
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 118
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 115
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 115
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 116
                      file: 
                      value: 
                        name: !ruby/object:Puppet::Parser::AST::Variable
                          line: 116
                          file: 
                          value: event_name
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 121
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 119
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Regex
                    line: 119
                    file: 
                    value: !ruby/regexp /(nodes|services)/
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 121
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 120
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 120
                      file: 
                      value: type_hash
                    value: !ruby/object:Puppet::Parser::AST::ASTHash
                      line: 120
                      file: 
                      value: {}
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 124
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 122
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Default
                    line: 122
                    file: 
                    value: default
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 124
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym statement
                    line: 123
                    file: 
                    doc: ""
                    name: fail
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 123
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Concat
                          line: 123
                          file: 
                          value: 
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 123
                              file: 
                              value: ""
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 123
                              file: 
                              value: type
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 123
                              file: 
                              value: " is an unrecogonized watch type that is not supported currently"
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 127
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 127
          file: 
          value: watch_hash
        value: !ruby/object:Puppet::Parser::AST::ASTHash
          line: 129
          file: 
          value: 
            watches: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 128
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 128
                  file: 
                  doc: ""
                  name: delete_undef_values
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 128
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 128
                        file: 
                        doc: ""
                        name: merge
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 128
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 128
                              file: 
                              value: basic_hash
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 128
                              file: 
                              value: type_hash
                        children: []
                  children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Relationship
        line: 134
        file: 
        children: []
        left: !ruby/object:Puppet::Parser::AST::Relationship
          line: 134
          file: 
          children: []
          left: !ruby/object:Puppet::Parser::AST::ResourceReference
            line: 131
            file: 
            type: File
            title: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 131
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 131
                  file: 
                  value: "consul::config_dir"
            children: []
          right: !ruby/object:Puppet::Parser::AST::Resource
            line: 134
            file: 
            doc: ""
            type: file
            instances: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 134
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceInstance
                  line: 134
                  file: 
                  title: !ruby/object:Puppet::Parser::AST::Concat
                    line: 132
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 132
                        file: 
                        value: ""
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 132
                        file: 
                        value: "consul::config_dir"
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 132
                        file: 
                        value: /watch_
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 132
                        file: 
                        value: id
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 132
                        file: 
                        value: ".json"
                  parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 133
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ResourceParam
                        line: 133
                        file: 
                        param: content
                        value: !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 133
                          file: 
                          doc: ""
                          name: template
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 133
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 133
                                file: 
                                value: consul/watch.json.erb
                          children: []
                        children: []
                  children: []
            children: []
          arrow: "->"
        right: !ruby/object:Puppet::Parser::AST::ResourceReference
          line: 134
          file: 
          type: Class
          title: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 134
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::String
                line: 134
                file: 
                value: "consul::run_service"
          children: []
        arrow: "~>"
  doc: "== Define: consul::watch\n\nSets up Consul watch, to span commands when data changes.\nhttp://www.consul.io/docs/agent/watches.html\n\n== Parameters\n\n[*handler*]\n  Full path to the script that will be excuted.\n\n[*datacenter*]\n  String overriding consul's default datacenter.\n\n[*token*]\n  String to override the default token.\n\n[*type*]\n  Type of data to watch. (Like key, service, services, nodes)\n\n[*key*]\n  Watch a specific key.\n\n[*keyprefix*]\n  Watch a whole keyprefix\n\n[*service*]\n  Watch a particular service\n\n[*service_tag*]\n  This actually maps to the \x22tag\x22 param for service watches.\n  (`tag` is a puppet builtin metaparameter)\n\n[*passingonly*]\n  Watch only those services that are passing healthchecks.\n\n[*state*]\n  Watch a state change on a service healthcheck.\n\n[*event_name*]\n  Name of an event to watch for.\n\n"
  line: 42
