--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server::connector"
  namespace: "tomcat::config::server"
  arguments: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 19
      file: 
      value: "::tomcat::catalina_home"
    connector_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 20
      file: 
      value: present
    port: !ruby/object:Puppet::Parser::AST::Undef
      line: 21
      file: 
      value: !ruby/sym undef
    protocol: !ruby/object:Puppet::Parser::AST::Undef
      line: 22
      file: 
      value: !ruby/sym undef
    parent_service: !ruby/object:Puppet::Parser::AST::String
      line: 23
      file: 
      value: Catalina
    additional_attributes: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 24
      file: 
      value: {}
    attributes_to_remove: !ruby/object:Puppet::Parser::AST::ASTArray
      line: 25
      file: 
      children: []
    purge_connectors: !ruby/object:Puppet::Parser::AST::Variable
      line: 26
      file: 
      value: "::tomcat::purge_connectors"
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 32
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 32
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 28
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 28
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 28
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 28
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 28
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 28
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 30
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 29
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 29
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 29
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: connector_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 32
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 33
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 33
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 33
              file: 
              value: additional_attributes
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 34
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 34
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 34
              file: 
              value: purge_connectors
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 40
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 36
          file: 
          value: protocol
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 38
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 37
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 37
                file: 
                value: "_protocol"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 37
                file: 
                value: protocol
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 40
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 40
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 39
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 39
                  file: 
                  value: "_protocol"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 39
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 42
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 42
          file: 
          value: path
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 42
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 42
              file: 
              value: "Server/Service[#attribute/name='"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 42
              file: 
              value: parent_service
            - !ruby/object:Puppet::Parser::AST::String
              line: 42
              file: 
              value: "']"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 48
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 44
          file: 
          value: purge_connectors
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 46
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 45
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 45
                file: 
                value: "_purge_connectors"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 45
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 45
                    file: 
                    value: "rm Server//Connector[#attribute/protocol='"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 45
                    file: 
                    value: "_protocol"
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 45
                    file: 
                    value: "']"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 48
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 48
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 47
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 47
                  file: 
                  value: "_purge_connectors"
                value: !ruby/object:Puppet::Parser::AST::Undef
                  line: 47
                  file: 
                  value: !ruby/sym undef
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 54
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 50
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 50
            file: 
            value: purge_connectors
          rval: !ruby/object:Puppet::Parser::AST::MatchOperator
            line: 50
            file: 
            operator: "=~"
            lval: !ruby/object:Puppet::Parser::AST::Variable
              line: 50
              file: 
              value: connector_ensure
            rval: !ruby/object:Puppet::Parser::AST::Regex
              line: 50
              file: 
              value: !ruby/regexp /^(absent|false)$/
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 52
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 51
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 51
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 51
                    file: 
                    value: "$connector_ensure must be set to 'true' or 'present' to use $purge_connectors"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 81
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 54
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 54
            file: 
            value: connector_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 54
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 59
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 59
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::Not
                line: 55
                file: 
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 55
                  file: 
                  value: port
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 57
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 56
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 56
                      file: 
                      value: base_path
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 56
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 56
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 56
                          file: 
                          value: path
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 56
                          file: 
                          value: "/Connector[#attribute/protocol='"
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 56
                          file: 
                          value: "_protocol"
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 56
                          file: 
                          value: "']"
                    children: []
              children: []
              else: !ruby/object:Puppet::Parser::AST::Else
                line: 59
                file: 
                doc: ""
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 59
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 58
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 58
                        file: 
                        value: base_path
                      value: !ruby/object:Puppet::Parser::AST::Concat
                        line: 58
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 58
                            file: 
                            value: ""
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 58
                            file: 
                            value: path
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 58
                            file: 
                            value: "/Connector[#attribute/port='"
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 58
                            file: 
                            value: port
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 58
                            file: 
                            value: "']"
                      children: []
                children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 60
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 60
                file: 
                value: changes
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 60
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 60
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 60
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 60
                    file: 
                    value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 81
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 66
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 66
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 62
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 62
                    file: 
                    value: port
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 64
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym statement
                      line: 63
                      file: 
                      doc: ""
                      name: fail
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 63
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 63
                            file: 
                            value: "$port must be specified unless $connector_ensure is set to 'absent' or 'false'"
                      children: []
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 66
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 66
                  file: 
                  value: base_path
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 66
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 66
                      file: 
                      value: ""
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 66
                      file: 
                      value: path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 66
                      file: 
                      value: "/Connector[#attribute/port='"
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 66
                      file: 
                      value: port
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 66
                      file: 
                      value: "']"
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 67
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 67
                  file: 
                  value: "_port"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 67
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 67
                      file: 
                      value: "set "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 67
                      file: 
                      value: base_path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 67
                      file: 
                      value: "/#attribute/port "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 67
                      file: 
                      value: port
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 67
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 68
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 68
                  file: 
                  value: "_protocol_change"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 68
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 68
                      file: 
                      value: "set "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 68
                      file: 
                      value: base_path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 68
                      file: 
                      value: "/#attribute/protocol "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 68
                      file: 
                      value: "_protocol"
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 68
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 73
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 69
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 69
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 69
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 69
                          file: 
                          value: additional_attributes
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 71
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 70
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 70
                        file: 
                        value: "_additional_attributes"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 70
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 70
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 70
                              file: 
                              doc: ""
                              name: join_keys_to_values
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 70
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 70
                                    file: 
                                    value: additional_attributes
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 70
                                    file: 
                                    value: " "
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 70
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 70
                                  file: 
                                  value: "set "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 70
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 70
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 73
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 73
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 72
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 72
                          file: 
                          value: "_additional_attributes"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 72
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 78
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 74
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 74
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 74
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 74
                          file: 
                          doc: ""
                          name: any2array
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 74
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 74
                                file: 
                                value: attributes_to_remove
                          children: []
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 76
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 75
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 75
                        file: 
                        value: "_attributes_to_remove"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 75
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 75
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 75
                              file: 
                              doc: ""
                              name: any2array
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 75
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 75
                                    file: 
                                    value: attributes_to_remove
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 75
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 75
                                  file: 
                                  value: "rm "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 75
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 75
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 78
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 78
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 77
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 77
                          file: 
                          value: "_attributes_to_remove"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 77
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 80
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 80
                  file: 
                  value: changes
                value: !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 80
                  file: 
                  doc: ""
                  name: delete_undef_values
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 80
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 80
                        file: 
                        doc: ""
                        name: flatten
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 80
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 80
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 80
                                  file: 
                                  value: "_purge_connectors"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 80
                                  file: 
                                  value: "_port"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 80
                                  file: 
                                  value: "_protocol_change"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 80
                                  file: 
                                  value: "_additional_attributes"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 80
                                  file: 
                                  value: "_attributes_to_remove"
                        children: []
                  children: []
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 87
        file: 
        doc: ""
        type: augeas
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 87
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 87
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 83
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 83
                    file: 
                    value: server-
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 83
                    file: 
                    value: catalina_base
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 83
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 83
                    file: 
                    value: parent_service
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 83
                    file: 
                    value: "-connector-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 83
                    file: 
                    value: port
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 83
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 84
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 84
                    file: 
                    param: lens
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 84
                      file: 
                      value: Xml.lns
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 85
                    file: 
                    param: incl
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 85
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 85
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 85
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 85
                          file: 
                          value: /conf/server.xml
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 86
                    file: 
                    param: changes
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 86
                      file: 
                      value: changes
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::config::server::connector\n\nConfigure Connector elements in $CATALINA_BASE/conf/server.xml\n\nParameters:\n- $catalina_base is the base directory for the Tomcat installation.\n- $connector_ensure specifies whether you are trying to add or remove the\n  Connector element. Valid values are 'true', 'false', 'present', and\n  'absent'. Defaults to 'present'.\n- The $port attribute. This attribute is required unless $connector_ensure\n  is set to false.\n- The $protocol attribute. Defaults to $name when not specified.\n- $parent_service is the Service element this Connector should be nested\n  beneath. Defaults to 'Catalina'.\n- An optional hash of $additional_attributes to add to the Connector. Should\n  be of the format 'attribute' => 'value'.\n- An optional array of $attributes_to_remove from the Connector.\n"
  line: 18
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server::engine"
  namespace: "tomcat::config::server"
  arguments: 
    default_host: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 31
      file: 
      value: "::tomcat::catalina_home"
    background_processor_delay: !ruby/object:Puppet::Parser::AST::Undef
      line: 32
      file: 
      value: !ruby/sym undef
    background_processor_delay_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 33
      file: 
      value: present
    class_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 34
      file: 
      value: !ruby/sym undef
    class_name_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 35
      file: 
      value: present
    engine_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 36
      file: 
      value: !ruby/sym undef
    jvm_route: !ruby/object:Puppet::Parser::AST::Undef
      line: 37
      file: 
      value: !ruby/sym undef
    jvm_route_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 38
      file: 
      value: present
    parent_service: !ruby/object:Puppet::Parser::AST::String
      line: 39
      file: 
      value: Catalina
    start_stop_threads: !ruby/object:Puppet::Parser::AST::Undef
      line: 40
      file: 
      value: !ruby/sym undef
    start_stop_threads_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 41
      file: 
      value: present
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 47
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 47
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 43
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 43
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 43
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 43
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 43
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 43
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 45
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 44
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 44
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 44
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 47
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 47
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 47
              file: 
              value: background_processor_delay_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 47
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 48
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 48
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 48
              file: 
              value: class_name_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 48
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 49
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 49
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 49
              file: 
              value: jvm_route_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 49
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 50
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 50
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 50
              file: 
              value: start_stop_threads_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 50
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 56
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 52
          file: 
          value: engine_name
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 54
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 53
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 53
                file: 
                value: "_name"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 53
                file: 
                value: engine_name
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 56
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 56
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 55
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 55
                  file: 
                  value: "_name"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 55
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 58
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 58
          file: 
          value: base_path
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 58
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 58
              file: 
              value: "Server/Service[#attribute/name='"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 58
              file: 
              value: parent_service
            - !ruby/object:Puppet::Parser::AST::String
              line: 58
              file: 
              value: "']/Engine"
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 60
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 60
          file: 
          value: "_name_change"
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 60
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 60
              file: 
              value: "set "
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 60
              file: 
              value: base_path
            - !ruby/object:Puppet::Parser::AST::String
              line: 60
              file: 
              value: "/#attribute/name "
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 60
              file: 
              value: "_name"
            - !ruby/object:Puppet::Parser::AST::String
              line: 60
              file: 
              value: ""
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 61
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 61
          file: 
          value: "_default_host"
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 61
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 61
              file: 
              value: "set "
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 61
              file: 
              value: base_path
            - !ruby/object:Puppet::Parser::AST::String
              line: 61
              file: 
              value: "/#attribute/defaultHost "
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 61
              file: 
              value: default_host
            - !ruby/object:Puppet::Parser::AST::String
              line: 61
              file: 
              value: ""
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 69
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 63
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 63
            file: 
            value: background_processor_delay_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 63
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 65
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 64
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 64
                file: 
                value: "_background_processor_delay"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 64
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 64
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 64
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 64
                    file: 
                    value: "/#attribute/backgroundProcessorDelay"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 69
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 69
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 65
              file: 
              value: background_processor_delay
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 67
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 66
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 66
                    file: 
                    value: "_background_processor_delay"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 66
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 66
                        file: 
                        value: "set "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 66
                        file: 
                        value: base_path
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 66
                        file: 
                        value: "/#attribute/backgroundProcessorDelay "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 66
                        file: 
                        value: background_processor_delay
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 66
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 69
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 69
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 68
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 68
                      file: 
                      value: "_background_processor_delay"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 68
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 77
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 71
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 71
            file: 
            value: class_name_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 71
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 73
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 72
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 72
                file: 
                value: "_class_name"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 72
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 72
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 72
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 72
                    file: 
                    value: "/#attribute/className"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 77
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 77
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 73
              file: 
              value: class_name
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 75
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 74
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 74
                    file: 
                    value: "_class_name"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 74
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 74
                        file: 
                        value: "set "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 74
                        file: 
                        value: base_path
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 74
                        file: 
                        value: "/#attribute/className "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 74
                        file: 
                        value: class_name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 74
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 77
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 77
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 76
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 76
                      file: 
                      value: "_class_name"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 76
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 85
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 79
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 79
            file: 
            value: jvm_route_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 79
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 81
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 80
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 80
                file: 
                value: "_jvm_route"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 80
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 80
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 80
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 80
                    file: 
                    value: "/#attribute/jvmRoute"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 85
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 85
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 81
              file: 
              value: jvm_route
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 83
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 82
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 82
                    file: 
                    value: "_jvm_route"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 82
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 82
                        file: 
                        value: "set "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 82
                        file: 
                        value: base_path
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 82
                        file: 
                        value: "/#attribute/jvmRoute "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 82
                        file: 
                        value: jvm_route
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 82
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 85
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 85
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 84
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 84
                      file: 
                      value: "_jvm_route"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 84
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 93
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 87
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 87
            file: 
            value: start_stop_threads_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 87
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 89
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 88
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 88
                file: 
                value: "_start_stop_threads"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 88
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 88
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 88
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 88
                    file: 
                    value: "/#attribute/startStopThreads"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 93
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 93
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 89
              file: 
              value: start_stop_threads
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 91
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 90
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 90
                    file: 
                    value: "_start_stop_threads"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 90
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 90
                        file: 
                        value: "set "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 90
                        file: 
                        value: base_path
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 90
                        file: 
                        value: "/#attribute/startStopThreads "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 90
                        file: 
                        value: start_stop_threads
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 90
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 93
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 93
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 92
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 92
                      file: 
                      value: "_start_stop_threads"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 92
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 95
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 95
          file: 
          value: changes
        value: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 95
          file: 
          doc: ""
          name: delete_undef_values
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 95
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ASTArray
                line: 95
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_name_change"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_default_host"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_background_processor_delay"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_class_name"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_jvm_route"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 95
                    file: 
                    value: "_start_stop_threads"
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 101
        file: 
        doc: ""
        type: augeas
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 101
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 101
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 97
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 97
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 97
                    file: 
                    value: catalina_base
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 97
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 97
                    file: 
                    value: parent_service
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 97
                    file: 
                    value: "-engine"
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 98
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 98
                    file: 
                    param: lens
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 98
                      file: 
                      value: Xml.lns
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 99
                    file: 
                    param: incl
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 99
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 99
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 99
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 99
                          file: 
                          value: /conf/server.xml
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 100
                    file: 
                    param: changes
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 100
                      file: 
                      value: changes
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::config::server::engine\n\nConfigure Engine elements in $CATALINA_BASE/conf/server.xml\n\nParameters:\n- $default_host is the defaultHost attribute for the Engine. This parameter is\n  required.\n- $catalina_base is the base directory for the Tomcat installation.\n- $background_processor_delay is the optional backgroundProcessorDelay\n  attribute.\n- $background_processor_delay_ensure specifies whether you are trying to add\n  or remove the backgroundProcessorDelay attribute. Valid values are 'true',\n  'false', 'present', and 'absent'. Defaults to 'present'.\n- $class_name is the optional className attribute.\n- $class_name_ensure specifies whether you are trying to add or remove the\n  className attribute. Valid values are 'true', 'false', 'present', and\n  'absent'. Defaults to 'present'.\n- $engine_name is the name attribute. Defaults to $name.\n- $jvm_route is the optional jvmRoute attribute.\n- $jvm_route_ensure specifies whether you are trying to add or remove the\n  jvmRoute attribute. Valid values are 'true', 'false', 'present', and\n  'absent'. Defaults to 'present'.\n- $parent_service is the Service element this Engine should be nested beneath.\n  Defaults to 'Catalina'.\n- $start_stop_threads is the optional startStopThreads attribute\n- $start_stop_threads_ensure specifies whether you are trying to add or remove\n  the startStopThreads attribute. Valid values are 'true', 'false', 'present'\n  and 'absent'. Defaults to 'present'.\n"
  line: 29
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server::host"
  namespace: "tomcat::config::server"
  arguments: 
    app_base: !ruby/object:Puppet::Parser::AST::Undef
      line: 19
      file: 
      value: !ruby/sym undef
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 20
      file: 
      value: "::tomcat::catalina_home"
    host_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 21
      file: 
      value: present
    host_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 22
      file: 
      value: !ruby/sym undef
    parent_service: !ruby/object:Puppet::Parser::AST::String
      line: 23
      file: 
      value: Catalina
    additional_attributes: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 24
      file: 
      value: {}
    attributes_to_remove: !ruby/object:Puppet::Parser::AST::ASTArray
      line: 25
      file: 
      children: []
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 31
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 31
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 27
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 27
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 27
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 27
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 27
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 27
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 29
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 28
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 28
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 28
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 31
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 31
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 31
              file: 
              value: host_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 31
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: additional_attributes
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 38
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 34
          file: 
          value: host_name
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 36
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 35
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 35
                file: 
                value: "_host_name"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 35
                file: 
                value: host_name
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 38
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 38
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 37
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 37
                  file: 
                  value: "_host_name"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 37
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 40
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 40
          file: 
          value: base_path
        value: !ruby/object:Puppet::Parser::AST::Concat
          line: 40
          file: 
          value: 
            - !ruby/object:Puppet::Parser::AST::String
              line: 40
              file: 
              value: "Server/Service[#attribute/name='"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 40
              file: 
              value: parent_service
            - !ruby/object:Puppet::Parser::AST::String
              line: 40
              file: 
              value: "']/Engine/Host[#attribute/name='"
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 40
              file: 
              value: "_host_name"
            - !ruby/object:Puppet::Parser::AST::String
              line: 40
              file: 
              value: "']"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 65
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 42
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 42
            file: 
            value: host_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 42
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 44
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 43
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 43
                file: 
                value: changes
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 43
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 43
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 43
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 43
                    file: 
                    value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 65
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 49
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 49
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 45
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 45
                    file: 
                    value: app_base
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 47
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym statement
                      line: 46
                      file: 
                      doc: ""
                      name: fail
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 46
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 46
                            file: 
                            value: "$app_base must be specified if you aren't removing the host"
                      children: []
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 49
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 49
                  file: 
                  value: "_host_name_change"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 49
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 49
                      file: 
                      value: "set "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 49
                      file: 
                      value: base_path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 49
                      file: 
                      value: "/#attribute/name "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 49
                      file: 
                      value: "_host_name"
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 49
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 50
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 50
                  file: 
                  value: "_app_base"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 50
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: "set "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 50
                      file: 
                      value: base_path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: "/#attribute/appBase "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 50
                      file: 
                      value: app_base
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 56
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 52
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 52
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 52
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 52
                          file: 
                          value: additional_attributes
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 54
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 53
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 53
                        file: 
                        value: "_additional_attributes"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 53
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 53
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 53
                              file: 
                              doc: ""
                              name: join_keys_to_values
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 53
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 53
                                    file: 
                                    value: additional_attributes
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 53
                                    file: 
                                    value: " "
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 53
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 53
                                  file: 
                                  value: "set "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 53
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 53
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 56
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 56
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 55
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 55
                          file: 
                          value: "_additional_attributes"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 55
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 62
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 58
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 58
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 58
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 58
                          file: 
                          doc: ""
                          name: any2array
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 58
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 58
                                file: 
                                value: attributes_to_remove
                          children: []
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 60
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 59
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 59
                        file: 
                        value: "_attributes_to_remove"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 59
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 59
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 59
                              file: 
                              doc: ""
                              name: any2array
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 59
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 59
                                    file: 
                                    value: attributes_to_remove
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 59
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 59
                                  file: 
                                  value: "rm "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 59
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 59
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 62
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 62
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 61
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 61
                          file: 
                          value: "_attributes_to_remove"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 61
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 64
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 64
                  file: 
                  value: changes
                value: !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 64
                  file: 
                  doc: ""
                  name: delete_undef_values
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 64
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 64
                        file: 
                        doc: ""
                        name: flatten
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 64
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 64
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 64
                                  file: 
                                  value: "_host_name_change"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 64
                                  file: 
                                  value: "_app_base"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 64
                                  file: 
                                  value: "_additional_attributes"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 64
                                  file: 
                                  value: "_attributes_to_remove"
                        children: []
                  children: []
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 71
        file: 
        doc: ""
        type: augeas
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 71
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 71
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 67
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 67
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 67
                    file: 
                    value: catalina_base
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 67
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 67
                    file: 
                    value: parent_service
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 67
                    file: 
                    value: "-host-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 67
                    file: 
                    value: "_host_name"
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 67
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 68
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 68
                    file: 
                    param: lens
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 68
                      file: 
                      value: Xml.lns
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 69
                    file: 
                    param: incl
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 69
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 69
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 69
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 69
                          file: 
                          value: /conf/server.xml
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 70
                    file: 
                    param: changes
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 70
                      file: 
                      value: changes
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::config::server::host\n\nConfigure Host elements in $CATALINA_BASE/conf/server.xml\n\nParameters:\n- $app_base is the appBase attribute for the Host. This parameter is required\n  unless $host_ensure is set to 'false' or 'absent'.\n- $catalina_base is the base directory for the Tomcat installation.\n- $host_ensure specifies whether you are trying to add or remove the Host\n  element. Valid values are 'true', 'false', 'present', and 'absent'. Defaults\n  to 'present'.\n- $host_name is the name attribute for the Host. Defaults to $name.\n- $parent_service is the Service element this Host should be nested beneath.\n  Defaults to 'Catalina'\n- An optional hash of $additional_attributes to add to the Host. Should be of\n  the format 'attribute' => 'value'.\n- An optional array of $attributes_to_remove from the Host.\n"
  line: 18
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server::service"
  namespace: "tomcat::config::server"
  arguments: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 16
      file: 
      value: "::tomcat::catalina_home"
    class_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 17
      file: 
      value: !ruby/sym undef
    class_name_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 18
      file: 
      value: present
    service_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 19
      file: 
      value: present
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 25
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 25
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 21
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 21
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 21
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 21
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 21
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 21
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 23
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 22
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 22
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 22
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 25
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 25
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 25
              file: 
              value: service_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 25
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 26
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 26
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 26
              file: 
              value: class_name_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 26
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 38
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 28
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 28
            file: 
            value: service_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 28
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 30
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 29
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 29
                file: 
                value: changes
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 29
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 29
                    file: 
                    value: "rm Server/Service[#attribute/name='"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 29
                    file: 
                    value: name
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 29
                    file: 
                    value: "']"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 38
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 36
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 36
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::MatchOperator
                  line: 31
                  file: 
                  operator: "=~"
                  lval: !ruby/object:Puppet::Parser::AST::Variable
                    line: 31
                    file: 
                    value: class_name_ensure
                  rval: !ruby/object:Puppet::Parser::AST::Regex
                    line: 31
                    file: 
                    value: !ruby/regexp /^(absent|false)$/
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 33
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 32
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 32
                        file: 
                        value: "_class_name"
                      value: !ruby/object:Puppet::Parser::AST::Concat
                        line: 32
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 32
                            file: 
                            value: "rm Server/Service[#attribute/name='"
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 32
                            file: 
                            value: name
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 32
                            file: 
                            value: "']/#attribute/className"
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 36
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 36
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::Variable
                      line: 33
                      file: 
                      value: class_name
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 35
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::VarDef
                          line: 34
                          file: 
                          doc: ""
                          name: !ruby/object:Puppet::Parser::AST::Name
                            line: 34
                            file: 
                            value: "_class_name"
                          value: !ruby/object:Puppet::Parser::AST::Concat
                            line: 34
                            file: 
                            value: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 34
                                file: 
                                value: "set Server/Service[#attribute/name='"
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 34
                                file: 
                                value: name
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 34
                                file: 
                                value: "']/#attribute/className "
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 34
                                file: 
                                value: class_name
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 34
                                file: 
                                value: ""
                          children: []
                    children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 36
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 36
                  file: 
                  value: "_service"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 36
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 36
                      file: 
                      value: "set Server/Service[#attribute/name='"
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 36
                      file: 
                      value: name
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 36
                      file: 
                      value: "']/#attribute/name "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 36
                      file: 
                      value: name
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 36
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 37
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 37
                  file: 
                  value: changes
                value: !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 37
                  file: 
                  doc: ""
                  name: delete_undef_values
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 37
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 37
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 37
                            file: 
                            value: "_service"
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 37
                            file: 
                            value: "_class_name"
                  children: []
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 47
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 40
          file: 
          value: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 40
            file: 
            doc: ""
            name: empty
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 40
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 40
                  file: 
                  value: changes
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 46
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 45
              file: 
              doc: ""
              type: augeas
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 45
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 45
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Concat
                      line: 41
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 41
                          file: 
                          value: server-
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 41
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 41
                          file: 
                          value: "-service-"
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 41
                          file: 
                          value: name
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 41
                          file: 
                          value: ""
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 42
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 42
                          file: 
                          param: lens
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 42
                            file: 
                            value: Xml.lns
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 43
                          file: 
                          param: incl
                          value: !ruby/object:Puppet::Parser::AST::Concat
                            line: 43
                            file: 
                            value: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 43
                                file: 
                                value: ""
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 43
                                file: 
                                value: catalina_base
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 43
                                file: 
                                value: /conf/server.xml
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 44
                          file: 
                          param: changes
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 44
                            file: 
                            value: changes
                          children: []
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::config::server::service\n\nConfigure a Service element nested in the Server element in\n$CATALINA_BASE/conf/server.xml\n\nParameters:\n- $catalina_base is the root of the Tomcat installation.\n- $class_name is the optional className attribute\n- $class_name_ensure specifies whether you are trying to set or remove the\n  className attribute. Valid values are 'true', 'false', 'present', or\n  'absent'. Defaults to 'present'.\n- $service_ensure specifies whether you are trying to add or remove the\n  service element. Valid values are 'true', 'false', 'present', or 'absent'.\n  Defaults to 'present'.\n"
  line: 15
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server::valve"
  namespace: "tomcat::config::server"
  arguments: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 20
      file: 
      value: "::tomcat::catalina_home"
    class_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 21
      file: 
      value: !ruby/sym undef
    parent_host: !ruby/object:Puppet::Parser::AST::Undef
      line: 22
      file: 
      value: !ruby/sym undef
    parent_service: !ruby/object:Puppet::Parser::AST::String
      line: 23
      file: 
      value: Catalina
    valve_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 24
      file: 
      value: present
    additional_attributes: !ruby/object:Puppet::Parser::AST::ASTHash
      line: 25
      file: 
      value: {}
    attributes_to_remove: !ruby/object:Puppet::Parser::AST::ASTArray
      line: 26
      file: 
      children: []
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 32
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 32
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 28
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 28
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 28
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 28
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 28
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 28
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 30
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 29
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 29
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 29
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: valve_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 32
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 33
        file: 
        doc: ""
        name: validate_hash
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 33
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 33
              file: 
              value: additional_attributes
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 39
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 35
          file: 
          value: class_name
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 37
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 36
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 36
                file: 
                value: "_class_name"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 36
                file: 
                value: class_name
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 39
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 39
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 38
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 38
                  file: 
                  value: "_class_name"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 38
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 45
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 41
          file: 
          value: parent_host
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 43
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 42
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 42
                file: 
                value: base_path
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 42
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "Server/Service[#attribute/name='"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 42
                    file: 
                    value: parent_service
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "']/Engine/Host[#attribute/name='"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 42
                    file: 
                    value: parent_host
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "']/Valve[#attribute/className='"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 42
                    file: 
                    value: "_class_name"
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "']"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 45
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 45
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 44
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 44
                  file: 
                  value: base_path
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 44
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 44
                      file: 
                      value: "Server/Service[#attribute/name='"
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 44
                      file: 
                      value: parent_service
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 44
                      file: 
                      value: "']/Engine/Valve[#attribute/className='"
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 44
                      file: 
                      value: "_class_name"
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 44
                      file: 
                      value: "']"
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 63
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 47
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 47
            file: 
            value: valve_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 47
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 49
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 48
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 48
                file: 
                value: changes
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 48
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 48
                    file: 
                    value: "rm "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 48
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 48
                    file: 
                    value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 63
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 51
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 50
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 50
                  file: 
                  value: "_class_name_change"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 50
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: "set "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 50
                      file: 
                      value: base_path
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: "/#attribute/className "
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 50
                      file: 
                      value: "_class_name"
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 50
                      file: 
                      value: ""
                children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 55
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 51
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 51
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 51
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 51
                          file: 
                          value: additional_attributes
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 53
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 52
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 52
                        file: 
                        value: "_additional_attributes"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 52
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 52
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 52
                              file: 
                              doc: ""
                              name: join_keys_to_values
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 52
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 52
                                    file: 
                                    value: additional_attributes
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 52
                                    file: 
                                    value: " "
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 52
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 52
                                  file: 
                                  value: "set "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 52
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 52
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 55
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 55
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 54
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 54
                          file: 
                          value: "_additional_attributes"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 54
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 60
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 56
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym rvalue
                    line: 56
                    file: 
                    doc: ""
                    name: empty
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 56
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Function
                          ftype: !ruby/sym rvalue
                          line: 56
                          file: 
                          doc: ""
                          name: any2array
                          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 56
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 56
                                file: 
                                value: attributes_to_remove
                          children: []
                    children: []
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 58
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 57
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 57
                        file: 
                        value: "_attributes_to_remove"
                      value: !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 57
                        file: 
                        doc: ""
                        name: prefix
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 57
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::Function
                              ftype: !ruby/sym rvalue
                              line: 57
                              file: 
                              doc: ""
                              name: any2array
                              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 57
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::Variable
                                    line: 57
                                    file: 
                                    value: attributes_to_remove
                              children: []
                            - !ruby/object:Puppet::Parser::AST::Concat
                              line: 57
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 57
                                  file: 
                                  value: "rm "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 57
                                  file: 
                                  value: base_path
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 57
                                  file: 
                                  value: "/#attribute/"
                        children: []
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 60
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 60
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 59
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 59
                          file: 
                          value: "_attributes_to_remove"
                        value: !ruby/object:Puppet::Parser::AST::Undef
                          line: 59
                          file: 
                          value: !ruby/sym undef
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 62
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 62
                  file: 
                  value: changes
                value: !ruby/object:Puppet::Parser::AST::Function
                  ftype: !ruby/sym rvalue
                  line: 62
                  file: 
                  doc: ""
                  name: delete_undef_values
                  arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 62
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Function
                        ftype: !ruby/sym rvalue
                        line: 62
                        file: 
                        doc: ""
                        name: flatten
                        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                          line: 62
                          file: 
                          children: 
                            - !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 62
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 62
                                  file: 
                                  value: "_class_name_change"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 62
                                  file: 
                                  value: "_additional_attributes"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 62
                                  file: 
                                  value: "_attributes_to_remove"
                        children: []
                  children: []
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 69
        file: 
        doc: ""
        type: augeas
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 69
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 69
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 65
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 65
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 65
                    file: 
                    value: catalina_base
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 65
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 65
                    file: 
                    value: parent_service
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 65
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 65
                    file: 
                    value: parent_host
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 65
                    file: 
                    value: "-valve-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 65
                    file: 
                    value: "_class_name"
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 65
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 66
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 66
                    file: 
                    param: lens
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 66
                      file: 
                      value: Xml.lns
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 67
                    file: 
                    param: incl
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 67
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 67
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 67
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 67
                          file: 
                          value: /conf/server.xml
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 68
                    file: 
                    param: changes
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 68
                      file: 
                      value: changes
                    children: []
              children: []
        children: []
  doc: "Definition tomcat::config::server::valve\n\nConfigure a Valve element in $CATALINA_BASE/conf/server.xml\n\nParameters:\n- $catalina_base is the root of the Tomcat installation\n- $class_name is the className attribute. If not specified, defaults to $name.\n- $parent_host is the Host element this Valve should be nested beneath. If not\n  specified, the Valve will be nested beneath the Engine under\n  $parent_service.\n- $parent_service is the Service element this Valve should be nested beneath.\n  Defaults to 'Catalina'.\n- $valve_ensure specifies whether you are trying to add or remove the Vavle\n  element. Valid values are 'true', 'false', 'present', or 'absent'. Defaults\n  to 'present'.\n- An optional hash of $additional_attributes to add to the Valve. Should be of\n  the format 'attribute' => 'value'.\n- An optional array of $attributes_to_remove from the Valve.\n"
  line: 19
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::config::server"
  namespace: "tomcat::config"
  arguments: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 18
      file: 
      value: "::tomcat::catalina_home"
    class_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 19
      file: 
      value: !ruby/sym undef
    class_name_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 20
      file: 
      value: present
    address: !ruby/object:Puppet::Parser::AST::Undef
      line: 21
      file: 
      value: !ruby/sym undef
    address_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 22
      file: 
      value: present
    port: !ruby/object:Puppet::Parser::AST::Undef
      line: 23
      file: 
      value: !ruby/sym undef
    shutdown: !ruby/object:Puppet::Parser::AST::Undef
      line: 24
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 31
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 31
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 27
          file: 
          operator: "<"
          lval: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 27
            file: 
            doc: ""
            name: versioncmp
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 27
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 27
                  file: 
                  value: "::augeasversion"
                - !ruby/object:Puppet::Parser::AST::String
                  line: 27
                  file: 
                  value: "1.0.0"
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Name
            line: 27
            file: 
            value: "0"
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 29
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 28
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 28
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 28
                    file: 
                    value: "Server configurations require Augeas >= 1.0.0"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 31
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 31
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 31
              file: 
              value: class_name_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 31
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: address_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 32
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 40
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 34
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 34
            file: 
            value: class_name_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 34
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 36
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 35
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 35
                file: 
                value: "_class_name"
              value: !ruby/object:Puppet::Parser::AST::String
                line: 35
                file: 
                value: "rm Server/#attribute/className"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 40
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 40
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 36
              file: 
              value: class_name
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 38
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 37
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 37
                    file: 
                    value: "_class_name"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 37
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 37
                        file: 
                        value: "set Server/#attribute/className "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 37
                        file: 
                        value: class_name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 37
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 40
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 40
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 39
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 39
                      file: 
                      value: "_class_name"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 39
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 48
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 42
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 42
            file: 
            value: address_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 42
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 44
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 43
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 43
                file: 
                value: "_address"
              value: !ruby/object:Puppet::Parser::AST::String
                line: 43
                file: 
                value: "rm Server/#attribute/address"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 48
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 48
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 44
              file: 
              value: address
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 46
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 45
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 45
                    file: 
                    value: "_address"
                  value: !ruby/object:Puppet::Parser::AST::Concat
                    line: 45
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 45
                        file: 
                        value: "set Server/#attribute/address "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 45
                        file: 
                        value: address
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 45
                        file: 
                        value: ""
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 48
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 48
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 47
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 47
                      file: 
                      value: "_address"
                    value: !ruby/object:Puppet::Parser::AST::Undef
                      line: 47
                      file: 
                      value: !ruby/sym undef
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 54
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 50
          file: 
          value: port
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 52
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 51
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 51
                file: 
                value: "_port"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 51
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 51
                    file: 
                    value: "set Server/#attribute/port "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 51
                    file: 
                    value: port
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 51
                    file: 
                    value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 54
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 54
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 53
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 53
                  file: 
                  value: "_port"
                value: !ruby/object:Puppet::Parser::AST::Undef
                  line: 53
                  file: 
                  value: !ruby/sym undef
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 60
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 56
          file: 
          value: shutdown
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 58
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 57
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 57
                file: 
                value: "_shutdown"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 57
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 57
                    file: 
                    value: "set Server/#attribute/shutdown "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 57
                    file: 
                    value: shutdown
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 57
                    file: 
                    value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 60
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 60
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 59
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 59
                  file: 
                  value: "_shutdown"
                value: !ruby/object:Puppet::Parser::AST::Undef
                  line: 59
                  file: 
                  value: !ruby/sym undef
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 62
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 62
          file: 
          value: changes
        value: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 62
          file: 
          doc: ""
          name: delete_undef_values
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 62
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::ASTArray
                line: 62
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 62
                    file: 
                    value: "_class_name"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 62
                    file: 
                    value: "_address"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 62
                    file: 
                    value: "_port"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 62
                    file: 
                    value: "_shutdown"
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 71
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 64
          file: 
          value: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 64
            file: 
            doc: ""
            name: empty
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 64
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::Variable
                  line: 64
                  file: 
                  value: changes
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 70
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 69
              file: 
              doc: ""
              type: augeas
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 69
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 69
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Concat
                      line: 65
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 65
                          file: 
                          value: server-
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 65
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 65
                          file: 
                          value: ""
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 66
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 66
                          file: 
                          param: lens
                          value: !ruby/object:Puppet::Parser::AST::String
                            line: 66
                            file: 
                            value: Xml.lns
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 67
                          file: 
                          param: incl
                          value: !ruby/object:Puppet::Parser::AST::Concat
                            line: 67
                            file: 
                            value: 
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 67
                                file: 
                                value: ""
                              - !ruby/object:Puppet::Parser::AST::Variable
                                line: 67
                                file: 
                                value: catalina_base
                              - !ruby/object:Puppet::Parser::AST::String
                                line: 67
                                file: 
                                value: /conf/server.xml
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 68
                          file: 
                          param: changes
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 68
                            file: 
                            value: changes
                          children: []
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::config::server\n\nConfigure attributes for the Server element in $CATALINA_BASE/conf/server.xml\n\nParameters\n- $catalina_base is the base directory for the Tomcat installation.\n- $class_name is the optional className attribute.\n- $class_name_ensure specifies whether you are trying to set or remove the\n  className attribute. Valid values are 'true', 'false', 'present', or\n  'absent'. Defaults to 'present'.\n- $address is the optional address attribute.\n- $address_ensure specifies whether you are trying to set of remove the\n  address attribute. Valid values are 'true', 'false', 'present', or\n  'absent'. Defaults to 'present'.\n- The $port to wait for shutdown commands on.\n- The $shutdown command that must be sent to $port.\n"
  line: 17
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: tomcat
  namespace: tomcat
  arguments: 
    catalina_home: !ruby/object:Puppet::Parser::AST::Variable
      line: 23
      file: 
      value: "::tomcat::params::catalina_home"
    user: !ruby/object:Puppet::Parser::AST::Variable
      line: 24
      file: 
      value: "::tomcat::params::user"
    group: !ruby/object:Puppet::Parser::AST::Variable
      line: 25
      file: 
      value: "::tomcat::params::group"
    install_from_source: !ruby/object:Puppet::Parser::AST::Boolean
      line: 26
      file: 
      value: true
    purge_connectors: !ruby/object:Puppet::Parser::AST::Boolean
      line: 27
      file: 
      value: false
    manage_user: !ruby/object:Puppet::Parser::AST::Boolean
      line: 28
      file: 
      value: true
    manage_group: !ruby/object:Puppet::Parser::AST::Boolean
      line: 29
      file: 
      value: true
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 32
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 31
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 31
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 31
              file: 
              value: install_from_source
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: purge_connectors
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 33
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 33
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 33
              file: 
              value: manage_user
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 34
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 34
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 34
              file: 
              value: manage_group
        children: []
      - !ruby/object:Puppet::Parser::AST::CaseStatement
        line: 41
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 36
          file: 
          value: "::osfamily"
        options: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 39
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 39
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 37
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: windows
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: Solaris
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: Darwin
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 39
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Function
                    ftype: !ruby/sym statement
                    line: 38
                    file: 
                    doc: ""
                    name: fail
                    arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 38
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Concat
                          line: 38
                          file: 
                          value: 
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 38
                              file: 
                              value: "Unsupported osfamily: "
                            - !ruby/object:Puppet::Parser::AST::Variable
                              line: 38
                              file: 
                              value: "::osfamily"
                            - !ruby/object:Puppet::Parser::AST::String
                              line: 38
                              file: 
                              value: ""
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::CaseOpt
              line: 40
              file: 
              value: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 40
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Default
                    line: 40
                    file: 
                    value: default
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 40
                file: 
                children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 51
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 43
          file: 
          value: install_from_source
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 49
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 48
              file: 
              doc: ""
              type: file
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 48
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 48
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 44
                      file: 
                      value: catalina_home
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 45
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 45
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 45
                            file: 
                            value: directory
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 46
                          file: 
                          param: owner
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 46
                            file: 
                            value: user
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 47
                          file: 
                          param: group
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 47
                            file: 
                            value: group
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 58
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 51
          file: 
          value: manage_user
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 56
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 55
              file: 
              doc: ""
              type: user
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 55
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 55
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 52
                      file: 
                      value: user
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 53
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 53
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 53
                            file: 
                            value: present
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 54
                          file: 
                          param: gid
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 54
                            file: 
                            value: group
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 63
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 58
          file: 
          value: manage_group
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 62
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 61
              file: 
              doc: ""
              type: group
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 61
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 61
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 59
                      file: 
                      value: group
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 60
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 60
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 60
                            file: 
                            value: present
                          children: []
                    children: []
              children: []
        children: []
  doc: "== Class: tomcat\n\nClass to manage installation and configuration of Tomcat.\n\n=== Parameters\n\n[*catalina_home*]\n  The base directory for the Tomcat installation.\n\n[*user*]\n  The user to run Tomcat as.\n\n[*group*]\n  The group to run Tomcat as.\n\n[*manage_user*]\n  Boolean specifying whether or not to manage the user. Defaults to true.\n\n[*manage_group*]\n  Boolean specifying whether or not to manage the group. Defaults to true.\n\n"
  line: 22
  parent: "::tomcat::params"
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::instance::package"
  namespace: "tomcat::instance"
  arguments: 
    package_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 9
      file: 
      value: installed
    package_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 10
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 16
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 16
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 12
          file: 
          operator: "!="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 12
            file: 
            value: caller_module_name
          rval: !ruby/object:Puppet::Parser::AST::Variable
            line: 12
            file: 
            value: module_name
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 14
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 13
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 13
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Concat
                    line: 13
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 13
                        file: 
                        value: "Use of private class "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 13
                        file: 
                        value: name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 13
                        file: 
                        value: " by "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 13
                        file: 
                        value: caller_module_name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 13
                        file: 
                        value: ""
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 20
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 16
          file: 
          value: package_name
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 18
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 17
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 17
                file: 
                value: "_package_name"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 17
                file: 
                value: package_name
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 20
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 20
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 19
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 19
                  file: 
                  value: "_package_name"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 19
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 24
        file: 
        doc: ""
        type: package
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 24
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 24
              file: 
              title: !ruby/object:Puppet::Parser::AST::Variable
                line: 22
                file: 
                value: "_package_name"
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 24
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 23
                    file: 
                    param: ensure
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 23
                      file: 
                      value: package_ensure
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::instance::package\n\nPrivate define to install Tomcat from a package.\n\nParameters:\n- $package_ensure is the ensure passed to the package resource.\n- The $package_name you want to install.\n"
  line: 8
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::instance::source"
  namespace: "tomcat::instance"
  arguments: 
    catalina_home: 
    catalina_base: 
    source_url: 
    source_strip_first_dir: !ruby/object:Puppet::Parser::AST::Undef
      line: 17
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 21
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 19
        file: 
        doc: ""
        name: include
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 21
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Name
              line: 19
              file: 
              value: staging
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 25
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
          line: 21
          file: 
          operator: "!="
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 21
            file: 
            value: caller_module_name
          rval: !ruby/object:Puppet::Parser::AST::Variable
            line: 21
            file: 
            value: module_name
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 23
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 22
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 22
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Concat
                    line: 22
                    file: 
                    value: 
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 22
                        file: 
                        value: "Use of private class "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 22
                        file: 
                        value: name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 22
                        file: 
                        value: " by "
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 22
                        file: 
                        value: caller_module_name
                      - !ruby/object:Puppet::Parser::AST::String
                        line: 22
                        file: 
                        value: ""
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 29
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 25
          file: 
          value: source_strip_first_dir
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 27
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 26
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 26
                file: 
                value: "_strip"
              value: !ruby/object:Puppet::Parser::AST::Name
                line: 26
                file: 
                value: "1"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 29
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 29
          file: 
          value: filename
        value: !ruby/object:Puppet::Parser::AST::Function
          ftype: !ruby/sym rvalue
          line: 29
          file: 
          doc: ""
          name: regsubst
          arguments: !ruby/object:Puppet::Parser::AST::ASTArray
            line: 29
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Variable
                line: 29
                file: 
                value: source_url
              - !ruby/object:Puppet::Parser::AST::String
                line: 29
                file: 
                value: ".*/(.*)"
              - !ruby/object:Puppet::Parser::AST::String
                line: 29
                file: 
                value: "\x5c1"
          children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 37
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 31
          file: 
          value: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 31
            file: 
            doc: ""
            name: defined
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 31
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceReference
                  line: 31
                  file: 
                  type: "Staging::File"
                  title: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 31
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 31
                        file: 
                        value: filename
                  children: []
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 35
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 34
              file: 
              doc: ""
              type: "staging::file"
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 34
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 34
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 32
                      file: 
                      value: filename
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 33
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 33
                          file: 
                          param: source
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 33
                            file: 
                            value: source_url
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 45
        file: 
        doc: ""
        type: "staging::extract"
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 45
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 45
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 37
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 37
                    file: 
                    value: name
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: "-"
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 37
                    file: 
                    value: filename
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 37
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 38
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 38
                    file: 
                    param: source
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 38
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 38
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 38
                          file: 
                          value: "::staging::path"
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 38
                          file: 
                          value: /tomcat/
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 38
                          file: 
                          value: filename
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 38
                          file: 
                          value: ""
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 39
                    file: 
                    param: target
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 39
                      file: 
                      value: catalina_base
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 40
                    file: 
                    param: require
                    value: !ruby/object:Puppet::Parser::AST::ResourceReference
                      line: 40
                      file: 
                      type: "Staging::File"
                      title: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 40
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 40
                            file: 
                            value: filename
                      children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 41
                    file: 
                    param: unless
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 41
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 41
                          file: 
                          value: "test \x22$(ls -A "
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 41
                          file: 
                          value: catalina_base
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 41
                          file: 
                          value: ")\x22"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 42
                    file: 
                    param: user
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 42
                      file: 
                      value: "::tomcat::user"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 43
                    file: 
                    param: group
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 43
                      file: 
                      value: "::tomcat::group"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 44
                    file: 
                    param: strip
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 44
                      file: 
                      value: "_strip"
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::instance::source\n\nPrivate define to install Tomcat from source.\n\nParameters:\n- $catalina_home is the root of the Tomcat installation.\n- $catalina_base is the base directory for the Tomcat installation.\n- The $source_url to install from.\n- $source_strip_first_dir is a boolean specifying whether or not to strip\n  the first directory when unpacking the source tarball. Defaults to true\n  when installing from source on non-Solaris systems. Requires nanliu/staging\n  > 0.4.0\n"
  line: 13
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::instance::uninstall"
  namespace: "tomcat::instance"
  arguments: 
    catalina_home: !ruby/object:Puppet::Parser::AST::Undef
      line: 2
      file: 
      value: !ruby/sym undef
    catalina_base: !ruby/object:Puppet::Parser::AST::Undef
      line: 3
      file: 
      value: !ruby/sym undef
    package_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 4
      file: 
      value: !ruby/sym undef
    install_from_source: !ruby/object:Puppet::Parser::AST::Boolean
      line: 5
      file: 
      value: true
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 13
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 11
        file: 
        doc: "   include tomcat\n"
        type: "tomcat::service"
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 11
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 11
              file: 
              title: !ruby/object:Puppet::Parser::AST::String
                line: 8
                file: 
                value: default
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 9
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 9
                    file: 
                    param: service_ensure
                    value: !ruby/object:Puppet::Parser::AST::Boolean
                      line: 9
                      file: 
                      value: false
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 10
                    file: 
                    param: catalina_base
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 10
                      file: 
                      value: catalina_base
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 38
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 13
          file: 
          value: install_from_source
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 19
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 18
              file: 
              doc: ""
              type: file
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 18
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 18
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 14
                      file: 
                      value: catalina_home
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 15
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 15
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 15
                            file: 
                            value: absent
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 16
                          file: 
                          param: force
                          value: !ruby/object:Puppet::Parser::AST::Boolean
                            line: 16
                            file: 
                            value: true
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 17
                          file: 
                          param: require
                          value: !ruby/object:Puppet::Parser::AST::ResourceReference
                            line: 17
                            file: 
                            type: "Tomcat::Service"
                            title: !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 17
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 17
                                  file: 
                                  value: default
                            children: []
                          children: []
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 26
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                line: 19
                file: 
                operator: "!="
                lval: !ruby/object:Puppet::Parser::AST::Variable
                  line: 19
                  file: 
                  value: catalina_base
                rval: !ruby/object:Puppet::Parser::AST::Variable
                  line: 19
                  file: 
                  value: catalina_home
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 25
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Resource
                    line: 24
                    file: 
                    doc: ""
                    type: file
                    instances: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 24
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceInstance
                          line: 24
                          file: 
                          title: !ruby/object:Puppet::Parser::AST::Variable
                            line: 20
                            file: 
                            value: catalina_base
                          parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 21
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceParam
                                line: 21
                                file: 
                                param: ensure
                                value: !ruby/object:Puppet::Parser::AST::Name
                                  line: 21
                                  file: 
                                  value: absent
                                children: []
                              - !ruby/object:Puppet::Parser::AST::ResourceParam
                                line: 22
                                file: 
                                param: force
                                value: !ruby/object:Puppet::Parser::AST::Boolean
                                  line: 22
                                  file: 
                                  value: true
                                children: []
                              - !ruby/object:Puppet::Parser::AST::ResourceParam
                                line: 23
                                file: 
                                param: require
                                value: !ruby/object:Puppet::Parser::AST::ResourceReference
                                  line: 23
                                  file: 
                                  type: "Tomcat::Service"
                                  title: !ruby/object:Puppet::Parser::AST::ASTArray
                                    line: 23
                                    file: 
                                    children: 
                                      - !ruby/object:Puppet::Parser::AST::String
                                        line: 23
                                        file: 
                                        value: default
                                  children: []
                                children: []
                          children: []
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 38
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 32
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 32
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Variable
                  line: 28
                  file: 
                  value: package_name
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 30
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 29
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 29
                        file: 
                        value: "_package_name"
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 29
                        file: 
                        value: package_name
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 32
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 32
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 31
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 31
                          file: 
                          value: "_package_name"
                        value: !ruby/object:Puppet::Parser::AST::Variable
                          line: 31
                          file: 
                          value: name
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::Resource
                line: 37
                file: 
                doc: ""
                type: "::package"
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 37
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 37
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::Variable
                        line: 34
                        file: 
                        value: "_package_name"
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 35
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 35
                            file: 
                            param: ensure
                            value: !ruby/object:Puppet::Parser::AST::Name
                              line: 35
                              file: 
                              value: absent
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 36
                            file: 
                            param: require
                            value: !ruby/object:Puppet::Parser::AST::ResourceReference
                              line: 36
                              file: 
                              type: "Tomcat::Service"
                              title: !ruby/object:Puppet::Parser::AST::ASTArray
                                line: 36
                                file: 
                                children: 
                                  - !ruby/object:Puppet::Parser::AST::String
                                    line: 36
                                    file: 
                                    value: default
                              children: []
                            children: []
                      children: []
                children: []
          children: []
  doc: ""
  line: 1
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::instance"
  namespace: tomcat
  arguments: 
    catalina_home: !ruby/object:Puppet::Parser::AST::Undef
      line: 21
      file: 
      value: !ruby/sym undef
    catalina_base: !ruby/object:Puppet::Parser::AST::Undef
      line: 22
      file: 
      value: !ruby/sym undef
    install_from_source: !ruby/object:Puppet::Parser::AST::Variable
      line: 23
      file: 
      value: "::tomcat::install_from_source"
    source_url: !ruby/object:Puppet::Parser::AST::Undef
      line: 24
      file: 
      value: !ruby/sym undef
    source_strip_first_dir: !ruby/object:Puppet::Parser::AST::Undef
      line: 25
      file: 
      value: !ruby/sym undef
    package_ensure: !ruby/object:Puppet::Parser::AST::Undef
      line: 26
      file: 
      value: !ruby/sym undef
    package_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 27
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 33
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 33
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 30
          file: 
          value: install_from_source
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 31
              file: 
              doc: ""
              name: validate_bool
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 31
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 31
                    file: 
                    value: install_from_source
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 37
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 33
          file: 
          value: source_strip_first_dir
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 35
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 34
              file: 
              doc: ""
              name: validate_bool
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 34
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 34
                    file: 
                    value: source_strip_first_dir
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 41
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 37
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 37
            file: 
            value: install_from_source
          rval: !ruby/object:Puppet::Parser::AST::Not
            line: 37
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 37
              file: 
              value: source_url
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 39
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 38
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 38
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 38
                    file: 
                    value: "If installing from source $source_url must be specified"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 45
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 41
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Not
            line: 41
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 41
              file: 
              value: install_from_source
            children: []
          rval: !ruby/object:Puppet::Parser::AST::Not
            line: 41
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 41
              file: 
              value: package_name
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 43
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 42
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 42
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "If not installing from source $package_name must be specified"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 49
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 45
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Not
            line: 45
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 45
              file: 
              value: install_from_source
            children: []
          rval: !ruby/object:Puppet::Parser::AST::BooleanOperator
            line: 45
            file: 
            operator: or
            lval: !ruby/object:Puppet::Parser::AST::Variable
              line: 45
              file: 
              value: catalina_home
            rval: !ruby/object:Puppet::Parser::AST::Variable
              line: 45
              file: 
              value: catalina_base
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 47
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 46
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 46
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 46
                    file: 
                    value: "Setting $catalina_home or $catalina_base when not installing from source doesn't affect the installation."
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 53
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 49
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 49
            file: 
            value: catalina_home
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 51
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 50
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 50
                file: 
                value: "_catalina_home"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 50
                file: 
                value: "::tomcat::catalina_home"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 53
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 53
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 52
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 52
                  file: 
                  value: "_catalina_home"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 52
                  file: 
                  value: catalina_home
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 59
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 55
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 55
            file: 
            value: catalina_base
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 57
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 56
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 56
                file: 
                value: "_catalina_base"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 56
                file: 
                value: "::tomcat::catalina_home"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 59
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 59
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 58
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 58
                  file: 
                  value: "_catalina_base"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 58
                  file: 
                  value: catalina_base
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 79
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 61
          file: 
          value: install_from_source
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 66
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 66
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::Not
                line: 62
                file: 
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 62
                  file: 
                  value: source_strip_first_dir
                children: []
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 64
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 63
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 63
                      file: 
                      value: source_strip
                    value: !ruby/object:Puppet::Parser::AST::Boolean
                      line: 63
                      file: 
                      value: true
                    children: []
              children: []
              else: !ruby/object:Puppet::Parser::AST::Else
                line: 66
                file: 
                doc: ""
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 66
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 65
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 65
                        file: 
                        value: source_strip
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 65
                        file: 
                        value: source_strip_first_dir
                      children: []
                children: []
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 74
              file: 
              doc: ""
              type: "tomcat::instance::source"
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 74
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 74
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 68
                      file: 
                      value: name
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 69
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 69
                          file: 
                          param: catalina_home
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 69
                            file: 
                            value: "_catalina_home"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 70
                          file: 
                          param: catalina_base
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 70
                            file: 
                            value: "_catalina_base"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 71
                          file: 
                          param: source_url
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 71
                            file: 
                            value: source_url
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 72
                          file: 
                          param: source_strip_first_dir
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 72
                            file: 
                            value: source_strip
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 73
                          file: 
                          param: require
                          value: !ruby/object:Puppet::Parser::AST::ResourceReference
                            line: 73
                            file: 
                            type: File
                            title: !ruby/object:Puppet::Parser::AST::ASTArray
                              line: 73
                              file: 
                              children: 
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 73
                                  file: 
                                  value: "_catalina_base"
                            children: []
                          children: []
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 79
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 79
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::Resource
                line: 78
                file: 
                doc: ""
                type: "tomcat::instance::package"
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 78
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 78
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::Variable
                        line: 76
                        file: 
                        value: package_name
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 77
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 77
                            file: 
                            param: package_ensure
                            value: !ruby/object:Puppet::Parser::AST::Variable
                              line: 77
                              file: 
                              value: package_ensure
                            children: []
                      children: []
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 88
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 81
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 81
            file: 
            value: install_from_source
          rval: !ruby/object:Puppet::Parser::AST::ComparisonOperator
            line: 81
            file: 
            operator: "!="
            lval: !ruby/object:Puppet::Parser::AST::Variable
              line: 81
              file: 
              value: "_catalina_base"
            rval: !ruby/object:Puppet::Parser::AST::Variable
              line: 81
              file: 
              value: "_catalina_home"
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 87
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 86
              file: 
              doc: ""
              type: file
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 86
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 86
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 82
                      file: 
                      value: "_catalina_base"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 83
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 83
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 83
                            file: 
                            value: directory
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 84
                          file: 
                          param: owner
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 84
                            file: 
                            value: "::tomcat::user"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 85
                          file: 
                          param: group
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 85
                            file: 
                            value: "::tomcat::group"
                          children: []
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::instance\n\nThis define installs an instance of Tomcat.\n\nParameters:\n- $catalina_home is the root of the Tomcat installation. This parameter only\n  affects the instance when $install_from_source is true.\n- $catalina_base is the base directory for the Tomcat installation. This\n  parameter only affects the instance when $install_from_source is true.\n- $install_from_source is a boolean specifying whether or not to install from\n  source. Defaults to true.\n- The $source_url to install from. Required if $install_from_source is true.\n- $source_strip_first_dir is a boolean specifying whether or not to strip\n  the first directory when unpacking the source tarball. Defaults to true\n  when installing from source. Requires nanliu/staging > 0.4.0\n- $package_ensure when installing from package, what the ensure should be set\n  to in the package resource.\n- $package_name is the name of the package you want to install. Required if\n  $install_from_source is false.\n"
  line: 20
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym hostclass
  name: "tomcat::params"
  namespace: "tomcat::params"
  arguments: {}
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 11
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 10
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 10
          file: 
          value: catalina_home
        value: !ruby/object:Puppet::Parser::AST::String
          line: 10
          file: 
          value: /opt/apache-tomcat
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 11
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 11
          file: 
          value: user
        value: !ruby/object:Puppet::Parser::AST::String
          line: 11
          file: 
          value: tomcat
        children: []
      - !ruby/object:Puppet::Parser::AST::VarDef
        line: 12
        file: 
        doc: ""
        name: !ruby/object:Puppet::Parser::AST::Name
          line: 12
          file: 
          value: group
        value: !ruby/object:Puppet::Parser::AST::String
          line: 12
          file: 
          value: tomcat
        children: []
  doc: "Class: tomcat::params\n\nThis class manages Tomcat parameters.\n\nParameters:\n- $catalina_home is the root of the Tomcat installation.\n- The $user Tomcat runs as.\n- The $group Tomcat runs as.\n"
  line: 9
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::service"
  namespace: tomcat
  arguments: 
    catalina_home: !ruby/object:Puppet::Parser::AST::Undef
      line: 23
      file: 
      value: !ruby/sym undef
    catalina_base: !ruby/object:Puppet::Parser::AST::Undef
      line: 24
      file: 
      value: !ruby/sym undef
    use_jsvc: !ruby/object:Puppet::Parser::AST::Boolean
      line: 25
      file: 
      value: false
    java_home: !ruby/object:Puppet::Parser::AST::Undef
      line: 26
      file: 
      value: !ruby/sym undef
    service_ensure: !ruby/object:Puppet::Parser::AST::Name
      line: 27
      file: 
      value: running
    use_init: !ruby/object:Puppet::Parser::AST::Boolean
      line: 28
      file: 
      value: false
    service_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 29
      file: 
      value: !ruby/sym undef
    start_command: !ruby/object:Puppet::Parser::AST::Undef
      line: 30
      file: 
      value: !ruby/sym undef
    stop_command: !ruby/object:Puppet::Parser::AST::Undef
      line: 31
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 35
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 34
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 34
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 34
              file: 
              value: use_jsvc
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 35
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 35
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 35
              file: 
              value: use_init
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 41
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 37
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 37
            file: 
            value: use_jsvc
          rval: !ruby/object:Puppet::Parser::AST::Variable
            line: 37
            file: 
            value: use_init
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 39
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 38
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 38
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 38
                    file: 
                    value: "Only one of $use_jsvc and $use_init can be set to true"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 45
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 41
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 41
            file: 
            value: use_init
          rval: !ruby/object:Puppet::Parser::AST::Not
            line: 41
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 41
              file: 
              value: service_name
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 43
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 42
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 42
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 42
                    file: 
                    value: "$service_name must be specified when $use_init is set to true"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 49
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 45
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 45
            file: 
            value: use_init
          rval: !ruby/object:Puppet::Parser::AST::BooleanOperator
            line: 45
            file: 
            operator: or
            lval: !ruby/object:Puppet::Parser::AST::Variable
              line: 45
              file: 
              value: catalina_home
            rval: !ruby/object:Puppet::Parser::AST::Variable
              line: 45
              file: 
              value: catalina_base
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 47
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 46
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 46
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 46
                    file: 
                    value: "$catalina_home and $catalina_base have no affect when $use_init = true"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 53
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 49
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 49
            file: 
            value: java_home
          rval: !ruby/object:Puppet::Parser::AST::Not
            line: 49
            file: 
            value: !ruby/object:Puppet::Parser::AST::Variable
              line: 49
              file: 
              value: use_jsvc
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 51
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 50
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 50
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 50
                    file: 
                    value: "$java_home has no affect unless $use_jsvc = true"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 57
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 53
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 53
            file: 
            value: java_home
          rval: !ruby/object:Puppet::Parser::AST::Variable
            line: 53
            file: 
            value: start_command
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 55
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 54
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 54
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 54
                    file: 
                    value: "$java_home is used in the $start_command, so this may not work as planned"
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 61
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 57
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 57
            file: 
            value: catalina_home
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 59
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 58
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 58
                file: 
                value: "_catalina_home"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 58
                file: 
                value: "::tomcat::catalina_home"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 61
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 61
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 60
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 60
                  file: 
                  value: "_catalina_home"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 60
                  file: 
                  value: catalina_home
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 67
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 63
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 63
            file: 
            value: catalina_base
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 65
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 64
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 64
                file: 
                value: "_catalina_base"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 64
                file: 
                value: "::tomcat::catalina_home"
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 67
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 67
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 66
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 66
                  file: 
                  value: "_catalina_base"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 66
                  file: 
                  value: catalina_base
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 124
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 69
          file: 
          value: use_jsvc
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 74
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 74
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::Variable
                line: 70
                file: 
                value: java_home
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 72
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 71
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 71
                      file: 
                      value: "_jsvc_home"
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 71
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 71
                          file: 
                          value: "-home "
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 71
                          file: 
                          value: java_home
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 71
                          file: 
                          value: " "
                    children: []
              children: []
              else: !ruby/object:Puppet::Parser::AST::Else
                line: 74
                file: 
                doc: ""
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 74
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 73
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 73
                        file: 
                        value: "_jsvc_home"
                      value: !ruby/object:Puppet::Parser::AST::Undef
                        line: 73
                        file: 
                        value: !ruby/sym undef
                      children: []
                children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 75
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 75
                file: 
                value: "_service_name"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 75
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 75
                    file: 
                    value: tomcat-
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 75
                    file: 
                    value: name
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 75
                    file: 
                    value: ""
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 76
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 76
                file: 
                value: "_hasstatus"
              value: !ruby/object:Puppet::Parser::AST::Boolean
                line: 76
                file: 
                value: false
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 77
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 77
                file: 
                value: "_hasrestart"
              value: !ruby/object:Puppet::Parser::AST::Boolean
                line: 77
                file: 
                value: false
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 78
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 78
                file: 
                value: "_start"
              value: !ruby/object:Puppet::Parser::AST::Selector
                line: 92
                file: 
                param: !ruby/object:Puppet::Parser::AST::Variable
                  line: 78
                  file: 
                  value: start_command
                values: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 91
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 90
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Undef
                        line: 79
                        file: 
                        value: !ruby/sym undef
                      value: !ruby/object:Puppet::Parser::AST::Concat
                        line: 79
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 79
                            file: 
                            value: "export CATALINA_HOME="
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 79
                            file: 
                            value: "_catalina_home"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 79
                            file: 
                            value: "; export CATALINA_BASE="
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 79
                            file: 
                            value: "_catalina_base"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 81
                            file: 
                            value: ";\n                 $CATALINA_BASE/bin/jsvc                    "
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 81
                            file: 
                            value: "_jsvc_home"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 81
                            file: 
                            value: "-user "
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 81
                            file: 
                            value: "::tomcat::user"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 90
                            file: 
                            value: "                    -classpath $CATALINA_BASE/bin/bootstrap.jar:$CATALINA_BASE/bin/tomcat-juli.jar                    -outfile $CATALINA_BASE/logs/catalina.out                    -errfile $CATALINA_BASE/logs/catalina.err                    -pidfile $CATALINA_BASE/logs/jsvc.pid                    -Dcatalina.home=$CATALINA_HOME                    -Dcatalina.base=$CATALINA_BASE                    -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager                    -Djava.util.logging.config.file=$CATALINA_BASE/conf/logging.properties                    org.apache.catalina.startup.Bootstrap"
                      children: []
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 91
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Default
                        line: 91
                        file: 
                        value: default
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 91
                        file: 
                        value: start_command
                      children: []
                children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 93
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 93
                file: 
                value: "_stop"
              value: !ruby/object:Puppet::Parser::AST::Selector
                line: 99
                file: 
                param: !ruby/object:Puppet::Parser::AST::Variable
                  line: 93
                  file: 
                  value: stop_command
                values: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 98
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 97
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Undef
                        line: 94
                        file: 
                        value: !ruby/sym undef
                      value: !ruby/object:Puppet::Parser::AST::Concat
                        line: 94
                        file: 
                        value: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 94
                            file: 
                            value: "export CATALINA_HOME="
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 94
                            file: 
                            value: "_catalina_home"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 94
                            file: 
                            value: "; export CATALINA_BASE="
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 94
                            file: 
                            value: "_catalina_base"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 97
                            file: 
                            value: |-
                              ;
                                               $CATALINA_BASE/bin/jsvc                    -pidfile $CATALINA_BASE/logs/jsvc.pid                    -stop org.apache.catalina.startup.Bootstrap
                      children: []
                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                      line: 98
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Default
                        line: 98
                        file: 
                        value: default
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 98
                        file: 
                        value: stop_command
                      children: []
                children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 100
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 100
                file: 
                value: "_status"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 100
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 100
                    file: 
                    value: "ps p `cat "
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 100
                    file: 
                    value: "_catalina_base"
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 100
                    file: 
                    value: "/logs/jsvc.pid` > /dev/null"
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 101
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 101
                file: 
                value: "_provider"
              value: !ruby/object:Puppet::Parser::AST::String
                line: 101
                file: 
                value: base
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 124
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::IfStatement
            line: 124
            file: 
            doc: ""
            test: !ruby/object:Puppet::Parser::AST::Variable
              line: 102
              file: 
              value: use_init
            statements: !ruby/object:Puppet::Parser::AST::BlockExpression
              line: 104
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 103
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 103
                    file: 
                    value: "_service_name"
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 103
                    file: 
                    value: service_name
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 104
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 104
                    file: 
                    value: "_hasstatus"
                  value: !ruby/object:Puppet::Parser::AST::Boolean
                    line: 104
                    file: 
                    value: true
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 105
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 105
                    file: 
                    value: "_hasrestart"
                  value: !ruby/object:Puppet::Parser::AST::Boolean
                    line: 105
                    file: 
                    value: true
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 106
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 106
                    file: 
                    value: "_start"
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 106
                    file: 
                    value: start_command
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 107
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 107
                    file: 
                    value: "_stop"
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 107
                    file: 
                    value: stop_command
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 108
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 108
                    file: 
                    value: "_status"
                  value: !ruby/object:Puppet::Parser::AST::Undef
                    line: 108
                    file: 
                    value: !ruby/sym undef
                  children: []
                - !ruby/object:Puppet::Parser::AST::VarDef
                  line: 109
                  file: 
                  doc: ""
                  name: !ruby/object:Puppet::Parser::AST::Name
                    line: 109
                    file: 
                    value: "_provider"
                  value: !ruby/object:Puppet::Parser::AST::Undef
                    line: 109
                    file: 
                    value: !ruby/sym undef
                  children: []
            children: []
            else: !ruby/object:Puppet::Parser::AST::Else
              line: 124
              file: 
              doc: ""
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 112
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 111
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 111
                      file: 
                      value: "_service_name"
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 111
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 111
                          file: 
                          value: tomcat-
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 111
                          file: 
                          value: name
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 111
                          file: 
                          value: ""
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 112
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 112
                      file: 
                      value: "_hasstatus"
                    value: !ruby/object:Puppet::Parser::AST::Boolean
                      line: 112
                      file: 
                      value: false
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 113
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 113
                      file: 
                      value: "_hasrestart"
                    value: !ruby/object:Puppet::Parser::AST::Boolean
                      line: 113
                      file: 
                      value: false
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 114
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 114
                      file: 
                      value: "_start"
                    value: !ruby/object:Puppet::Parser::AST::Selector
                      line: 117
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Variable
                        line: 114
                        file: 
                        value: start_command
                      values: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 117
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 115
                            file: 
                            param: !ruby/object:Puppet::Parser::AST::Undef
                              line: 115
                              file: 
                              value: !ruby/sym undef
                            value: !ruby/object:Puppet::Parser::AST::Concat
                              line: 115
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 115
                                  file: 
                                  value: "su -s /bin/bash -c '"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 115
                                  file: 
                                  value: "_catalina_base"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 115
                                  file: 
                                  value: "/bin/catalina.sh start' "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 115
                                  file: 
                                  value: "::tomcat::user"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 115
                                  file: 
                                  value: ""
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 117
                            file: 
                            param: !ruby/object:Puppet::Parser::AST::Default
                              line: 116
                              file: 
                              value: default
                            value: !ruby/object:Puppet::Parser::AST::Variable
                              line: 116
                              file: 
                              value: start_command
                            children: []
                      children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 118
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 118
                      file: 
                      value: "_stop"
                    value: !ruby/object:Puppet::Parser::AST::Selector
                      line: 121
                      file: 
                      param: !ruby/object:Puppet::Parser::AST::Variable
                        line: 118
                        file: 
                        value: stop_command
                      values: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 121
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 119
                            file: 
                            param: !ruby/object:Puppet::Parser::AST::Undef
                              line: 119
                              file: 
                              value: !ruby/sym undef
                            value: !ruby/object:Puppet::Parser::AST::Concat
                              line: 119
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 119
                                  file: 
                                  value: "su -s /bin/bash -c '"
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 119
                                  file: 
                                  value: "_catalina_base"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 119
                                  file: 
                                  value: "/bin/catalina.sh stop' "
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 119
                                  file: 
                                  value: "::tomcat::user"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 119
                                  file: 
                                  value: ""
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 121
                            file: 
                            param: !ruby/object:Puppet::Parser::AST::Default
                              line: 120
                              file: 
                              value: default
                            value: !ruby/object:Puppet::Parser::AST::Variable
                              line: 120
                              file: 
                              value: stop_command
                            children: []
                      children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 122
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 122
                      file: 
                      value: "_status"
                    value: !ruby/object:Puppet::Parser::AST::Concat
                      line: 122
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 122
                          file: 
                          value: "ps aux | grep 'catalina.base="
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 122
                          file: 
                          value: "_catalina_base"
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 122
                          file: 
                          value: " ' | grep -v grep"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 123
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 123
                      file: 
                      value: "_provider"
                    value: !ruby/object:Puppet::Parser::AST::String
                      line: 123
                      file: 
                      value: base
                    children: []
              children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 134
        file: 
        doc: ""
        type: service
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 134
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 134
              file: 
              title: !ruby/object:Puppet::Parser::AST::Variable
                line: 126
                file: 
                value: "_service_name"
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 127
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 127
                    file: 
                    param: ensure
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 127
                      file: 
                      value: service_ensure
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 128
                    file: 
                    param: hasstatus
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 128
                      file: 
                      value: "_hasstatus"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 129
                    file: 
                    param: hasrestart
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 129
                      file: 
                      value: "_hasrestart"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 130
                    file: 
                    param: start
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 130
                      file: 
                      value: "_start"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 131
                    file: 
                    param: stop
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 131
                      file: 
                      value: "_stop"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 132
                    file: 
                    param: status
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 132
                      file: 
                      value: "_status"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 133
                    file: 
                    param: provider
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 133
                      file: 
                      value: "_provider"
                    children: []
              children: []
        children: []
  doc: "Definition: tomcat::service\n\nService management for Tomcat.\n\nParameters:\n- $catalina_home is the root of the Tomcat installation.\n- $catalina_base is the base directory for the Tomcat installation.\n- Whether or not to $use_jsvc for service management. Boolean defaulting to\n  false. If both $use_jsvc and $use_init are false,\n  $CATALINA_BASE/bin/catalina.sh start and $CATALIN/A_BASE/bin/catalina.sh\n  stop are used for service management.\n- If using jsvc, optionally set java_home.  Has no affect unless\n  $use_jsvc = true.\n- $service_ensure is passed on to the service resource.\n- Whether or not to $use_init for service management. Boolean defaulting to\n  false. If both $use_jsvc and $use_init are false,\n  $CATALINA_BASE/bin/catalina.sh start and $CATALIN/A_BASE/bin/catalina.sh\n  stop are used for service management.\n- The $service_name to use when $use_init is true.\n- The $start_command to use for the service\n- The $stop_command to use for the service\n"
  line: 22
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::setenv::entry"
  namespace: "tomcat::setenv"
  arguments: 
    value: 
    ensure: !ruby/object:Puppet::Parser::AST::String
      line: 15
      file: 
      value: present
    config_file: !ruby/object:Puppet::Parser::AST::Concat
      line: 16
      file: 
      value: 
        - !ruby/object:Puppet::Parser::AST::String
          line: 16
          file: 
          value: ""
        - !ruby/object:Puppet::Parser::AST::Variable
          line: 16
          file: 
          value: "::tomcat::catalina_home"
        - !ruby/object:Puppet::Parser::AST::String
          line: 16
          file: 
          value: /bin/setenv.sh
    param: !ruby/object:Puppet::Parser::AST::Variable
      line: 17
      file: 
      value: name
    quote_char: !ruby/object:Puppet::Parser::AST::Undef
      line: 18
      file: 
      value: !ruby/sym undef
    base_path: !ruby/object:Puppet::Parser::AST::String
      line: 20
      file: 
      value: ""
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 28
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 28
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 23
          file: 
          value: base_path
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 25
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 24
              file: 
              doc: ""
              name: warning
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 24
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 24
                    file: 
                    value: "The $base_path parameter is deprecated; please use $config_file instead"
              children: []
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 25
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 25
                file: 
                value: "_config_file"
              value: !ruby/object:Puppet::Parser::AST::Concat
                line: 25
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 25
                    file: 
                    value: ""
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 25
                    file: 
                    value: base_path
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 25
                    file: 
                    value: /setenv.sh
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 28
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 28
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 27
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 27
                  file: 
                  value: "_config_file"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 27
                  file: 
                  value: config_file
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 34
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 30
          file: 
          value: !ruby/object:Puppet::Parser::AST::Variable
            line: 30
            file: 
            value: quote_char
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 31
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 31
                file: 
                value: "_quote_char"
              value: !ruby/object:Puppet::Parser::AST::String
                line: 31
                file: 
                value: ""
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 34
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 34
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 33
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 33
                  file: 
                  value: "_quote_char"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 33
                  file: 
                  value: quote_char
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 44
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Not
          line: 36
          file: 
          value: !ruby/object:Puppet::Parser::AST::Function
            ftype: !ruby/sym rvalue
            line: 36
            file: 
            doc: ""
            name: defined
            arguments: !ruby/object:Puppet::Parser::AST::ASTArray
              line: 36
              file: 
              children: 
                - !ruby/object:Puppet::Parser::AST::ResourceReference
                  line: 36
                  file: 
                  type: Concat
                  title: !ruby/object:Puppet::Parser::AST::ASTArray
                    line: 36
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::Variable
                        line: 36
                        file: 
                        value: "_config_file"
                  children: []
            children: []
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 42
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 41
              file: 
              doc: ""
              type: concat
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 41
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 41
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Variable
                      line: 37
                      file: 
                      value: "_config_file"
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 38
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 38
                          file: 
                          param: owner
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 38
                            file: 
                            value: "::tomcat::user"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 39
                          file: 
                          param: group
                          value: !ruby/object:Puppet::Parser::AST::Variable
                            line: 39
                            file: 
                            value: "::tomcat::group"
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 40
                          file: 
                          param: ensure_newline
                          value: !ruby/object:Puppet::Parser::AST::Boolean
                            line: 40
                            file: 
                            value: true
                          children: []
                    children: []
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::Resource
        line: 48
        file: 
        doc: ""
        type: "concat::fragment"
        instances: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 48
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::ResourceInstance
              line: 48
              file: 
              title: !ruby/object:Puppet::Parser::AST::Concat
                line: 44
                file: 
                value: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 44
                    file: 
                    value: setenv-
                  - !ruby/object:Puppet::Parser::AST::Variable
                    line: 44
                    file: 
                    value: name
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 44
                    file: 
                    value: ""
              parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 45
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 45
                    file: 
                    param: ensure
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 45
                      file: 
                      value: ensure
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 46
                    file: 
                    param: target
                    value: !ruby/object:Puppet::Parser::AST::Variable
                      line: 46
                      file: 
                      value: "_config_file"
                    children: []
                  - !ruby/object:Puppet::Parser::AST::ResourceParam
                    line: 47
                    file: 
                    param: content
                    value: !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym rvalue
                      line: 47
                      file: 
                      doc: ""
                      name: inline_template
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 47
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 47
                            file: 
                            value: "<%= @param %>=<%= @_quote_char %><%= Array(@value).join(\x22 \x22) %><%= @_quote_char %>"
                      children: []
                    children: []
              children: []
        children: []
  doc: "Definition tomcat::setenv::entry\n\nThis define adds an entry to the setenv.sh script.\n\nParameters:\n- $value is the value of the parameter you're setting\n- $ensure whether the fragment should be present or absent.\n- $config_file is the path to the config file to edit\n- $param is the parameter you're setting. Defaults to $name.\n- $quote_char is the optional character to quote the value with.\n- (Deprecated) $base_path is the path to create the setenv.sh script under. Should be\n  either $catalina_base/bin or $catalina_home/bin.\n"
  line: 13
--- !ruby/object:Puppet::Resource::Type
  type: !ruby/sym definition
  name: "tomcat::war"
  namespace: tomcat
  arguments: 
    catalina_base: !ruby/object:Puppet::Parser::AST::Variable
      line: 23
      file: 
      value: "::tomcat::catalina_home"
    app_base: !ruby/object:Puppet::Parser::AST::Undef
      line: 24
      file: 
      value: !ruby/sym undef
    deployment_path: !ruby/object:Puppet::Parser::AST::Undef
      line: 25
      file: 
      value: !ruby/sym undef
    war_ensure: !ruby/object:Puppet::Parser::AST::String
      line: 26
      file: 
      value: present
    war_name: !ruby/object:Puppet::Parser::AST::Undef
      line: 27
      file: 
      value: !ruby/sym undef
    war_purge: !ruby/object:Puppet::Parser::AST::Boolean
      line: 28
      file: 
      value: true
    war_source: !ruby/object:Puppet::Parser::AST::Undef
      line: 29
      file: 
      value: !ruby/sym undef
  argument_types: {}
  match: 
  module_name: ""
  code: !ruby/object:Puppet::Parser::AST::BlockExpression
    line: 32
    file: 
    children: 
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 31
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 31
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 31
              file: 
              value: war_ensure
            - !ruby/object:Puppet::Parser::AST::String
              line: 31
              file: 
              value: "^(present|absent|true|false)$"
        children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 32
        file: 
        doc: ""
        name: validate_bool
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 32
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 32
              file: 
              value: war_purge
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 38
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::BooleanOperator
          line: 34
          file: 
          operator: and
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 34
            file: 
            value: app_base
          rval: !ruby/object:Puppet::Parser::AST::Variable
            line: 34
            file: 
            value: deployment_path
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 36
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Function
              ftype: !ruby/sym statement
              line: 35
              file: 
              doc: ""
              name: fail
              arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 35
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::String
                    line: 35
                    file: 
                    value: "Only one of $app_base and $deployment_path can be specified."
              children: []
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 42
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 38
          file: 
          value: war_name
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 40
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 39
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 39
                file: 
                value: "_war_name"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 39
                file: 
                value: war_name
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 42
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 42
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 41
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 41
                  file: 
                  value: "_war_name"
                value: !ruby/object:Puppet::Parser::AST::Variable
                  line: 41
                  file: 
                  value: name
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::Function
        ftype: !ruby/sym statement
        line: 44
        file: 
        doc: ""
        name: validate_re
        arguments: !ruby/object:Puppet::Parser::AST::ASTArray
          line: 44
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Variable
              line: 44
              file: 
              value: "_war_name"
            - !ruby/object:Puppet::Parser::AST::String
              line: 44
              file: 
              value: "\x5c.war$"
        children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 55
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::Variable
          line: 46
          file: 
          value: deployment_path
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 48
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::VarDef
              line: 47
              file: 
              doc: ""
              name: !ruby/object:Puppet::Parser::AST::Name
                line: 47
                file: 
                value: "_deployment_path"
              value: !ruby/object:Puppet::Parser::AST::Variable
                line: 47
                file: 
                value: deployment_path
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 55
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 53
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 53
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Variable
                  line: 49
                  file: 
                  value: app_base
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 51
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::VarDef
                      line: 50
                      file: 
                      doc: ""
                      name: !ruby/object:Puppet::Parser::AST::Name
                        line: 50
                        file: 
                        value: "_app_base"
                      value: !ruby/object:Puppet::Parser::AST::Variable
                        line: 50
                        file: 
                        value: app_base
                      children: []
                children: []
                else: !ruby/object:Puppet::Parser::AST::Else
                  line: 53
                  file: 
                  doc: ""
                  statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                    line: 53
                    file: 
                    children: 
                      - !ruby/object:Puppet::Parser::AST::VarDef
                        line: 52
                        file: 
                        doc: ""
                        name: !ruby/object:Puppet::Parser::AST::Name
                          line: 52
                          file: 
                          value: "_app_base"
                        value: !ruby/object:Puppet::Parser::AST::String
                          line: 52
                          file: 
                          value: webapps
                        children: []
                  children: []
              - !ruby/object:Puppet::Parser::AST::VarDef
                line: 54
                file: 
                doc: ""
                name: !ruby/object:Puppet::Parser::AST::Name
                  line: 54
                  file: 
                  value: "_deployment_path"
                value: !ruby/object:Puppet::Parser::AST::Concat
                  line: 54
                  file: 
                  value: 
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 54
                      file: 
                      value: ""
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 54
                      file: 
                      value: catalina_base
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 54
                      file: 
                      value: /
                    - !ruby/object:Puppet::Parser::AST::Variable
                      line: 54
                      file: 
                      value: "_app_base"
                    - !ruby/object:Puppet::Parser::AST::String
                      line: 54
                      file: 
                      value: ""
                children: []
          children: []
      - !ruby/object:Puppet::Parser::AST::IfStatement
        line: 79
        file: 
        doc: ""
        test: !ruby/object:Puppet::Parser::AST::MatchOperator
          line: 57
          file: 
          operator: "=~"
          lval: !ruby/object:Puppet::Parser::AST::Variable
            line: 57
            file: 
            value: war_ensure
          rval: !ruby/object:Puppet::Parser::AST::Regex
            line: 57
            file: 
            value: !ruby/regexp /^(absent|false)$/
          children: []
        statements: !ruby/object:Puppet::Parser::AST::BlockExpression
          line: 62
          file: 
          children: 
            - !ruby/object:Puppet::Parser::AST::Resource
              line: 61
              file: 
              doc: ""
              type: file
              instances: !ruby/object:Puppet::Parser::AST::ASTArray
                line: 61
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::ResourceInstance
                    line: 61
                    file: 
                    title: !ruby/object:Puppet::Parser::AST::Concat
                      line: 58
                      file: 
                      value: 
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 58
                          file: 
                          value: ""
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 58
                          file: 
                          value: "_deployment_path"
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 58
                          file: 
                          value: /
                        - !ruby/object:Puppet::Parser::AST::Variable
                          line: 58
                          file: 
                          value: "_war_name"
                        - !ruby/object:Puppet::Parser::AST::String
                          line: 58
                          file: 
                          value: ""
                    parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                      line: 59
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 59
                          file: 
                          param: ensure
                          value: !ruby/object:Puppet::Parser::AST::Name
                            line: 59
                            file: 
                            value: absent
                          children: []
                        - !ruby/object:Puppet::Parser::AST::ResourceParam
                          line: 60
                          file: 
                          param: force
                          value: !ruby/object:Puppet::Parser::AST::Boolean
                            line: 60
                            file: 
                            value: false
                          children: []
                    children: []
              children: []
            - !ruby/object:Puppet::Parser::AST::IfStatement
              line: 71
              file: 
              doc: ""
              test: !ruby/object:Puppet::Parser::AST::Variable
                line: 62
                file: 
                value: war_purge
              statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                line: 64
                file: 
                children: 
                  - !ruby/object:Puppet::Parser::AST::VarDef
                    line: 63
                    file: 
                    doc: ""
                    name: !ruby/object:Puppet::Parser::AST::Name
                      line: 63
                      file: 
                      value: war_dir_name
                    value: !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym rvalue
                      line: 63
                      file: 
                      doc: ""
                      name: regsubst
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 63
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::Variable
                            line: 63
                            file: 
                            value: "_war_name"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 63
                            file: 
                            value: "\x5c.war$"
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 63
                            file: 
                            value: ""
                      children: []
                    children: []
                  - !ruby/object:Puppet::Parser::AST::IfStatement
                    line: 70
                    file: 
                    doc: ""
                    test: !ruby/object:Puppet::Parser::AST::ComparisonOperator
                      line: 64
                      file: 
                      operator: "!="
                      lval: !ruby/object:Puppet::Parser::AST::Variable
                        line: 64
                        file: 
                        value: war_dir_name
                      rval: !ruby/object:Puppet::Parser::AST::String
                        line: 64
                        file: 
                        value: ""
                      children: []
                    statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                      line: 69
                      file: 
                      children: 
                        - !ruby/object:Puppet::Parser::AST::Resource
                          line: 68
                          file: 
                          doc: ""
                          type: file
                          instances: !ruby/object:Puppet::Parser::AST::ASTArray
                            line: 68
                            file: 
                            children: 
                              - !ruby/object:Puppet::Parser::AST::ResourceInstance
                                line: 68
                                file: 
                                title: !ruby/object:Puppet::Parser::AST::Concat
                                  line: 65
                                  file: 
                                  value: 
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 65
                                      file: 
                                      value: ""
                                    - !ruby/object:Puppet::Parser::AST::Variable
                                      line: 65
                                      file: 
                                      value: "_deployment_path"
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 65
                                      file: 
                                      value: /
                                    - !ruby/object:Puppet::Parser::AST::Variable
                                      line: 65
                                      file: 
                                      value: war_dir_name
                                    - !ruby/object:Puppet::Parser::AST::String
                                      line: 65
                                      file: 
                                      value: ""
                                parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                                  line: 66
                                  file: 
                                  children: 
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 66
                                      file: 
                                      param: ensure
                                      value: !ruby/object:Puppet::Parser::AST::Name
                                        line: 66
                                        file: 
                                        value: absent
                                      children: []
                                    - !ruby/object:Puppet::Parser::AST::ResourceParam
                                      line: 67
                                      file: 
                                      param: force
                                      value: !ruby/object:Puppet::Parser::AST::Boolean
                                        line: 67
                                        file: 
                                        value: true
                                      children: []
                                children: []
                          children: []
                    children: []
              children: []
        children: []
        else: !ruby/object:Puppet::Parser::AST::Else
          line: 79
          file: 
          doc: ""
          statements: !ruby/object:Puppet::Parser::AST::BlockExpression
            line: 75
            file: 
            children: 
              - !ruby/object:Puppet::Parser::AST::IfStatement
                line: 75
                file: 
                doc: ""
                test: !ruby/object:Puppet::Parser::AST::Not
                  line: 72
                  file: 
                  value: !ruby/object:Puppet::Parser::AST::Variable
                    line: 72
                    file: 
                    value: war_source
                  children: []
                statements: !ruby/object:Puppet::Parser::AST::BlockExpression
                  line: 74
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::Function
                      ftype: !ruby/sym statement
                      line: 73
                      file: 
                      doc: ""
                      name: fail
                      arguments: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 73
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::String
                            line: 73
                            file: 
                            value: "$war_source must be specified if you aren't removing the WAR"
                      children: []
                children: []
              - !ruby/object:Puppet::Parser::AST::Resource
                line: 78
                file: 
                doc: ""
                type: "staging::file"
                instances: !ruby/object:Puppet::Parser::AST::ASTArray
                  line: 78
                  file: 
                  children: 
                    - !ruby/object:Puppet::Parser::AST::ResourceInstance
                      line: 78
                      file: 
                      title: !ruby/object:Puppet::Parser::AST::Variable
                        line: 75
                        file: 
                        value: name
                      parameters: !ruby/object:Puppet::Parser::AST::ASTArray
                        line: 76
                        file: 
                        children: 
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 76
                            file: 
                            param: source
                            value: !ruby/object:Puppet::Parser::AST::Variable
                              line: 76
                              file: 
                              value: war_source
                            children: []
                          - !ruby/object:Puppet::Parser::AST::ResourceParam
                            line: 77
                            file: 
                            param: target
                            value: !ruby/object:Puppet::Parser::AST::Concat
                              line: 77
                              file: 
                              value: 
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 77
                                  file: 
                                  value: ""
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 77
                                  file: 
                                  value: "_deployment_path"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 77
                                  file: 
                                  value: /
                                - !ruby/object:Puppet::Parser::AST::Variable
                                  line: 77
                                  file: 
                                  value: "_war_name"
                                - !ruby/object:Puppet::Parser::AST::String
                                  line: 77
                                  file: 
                                  value: ""
                            children: []
                      children: []
                children: []
          children: []
  doc: "Definition: tomcat::war\n\nManage deployment of WAR files.\n\nParameters:\n- $catalina_base is the base directory for the Tomcat installation\n- $app_base is the path relative to $catalina_base to deploy the WAR to.\n  Defaults to 'webapps'.\n- The $deployment_path can optionally be specified. Only one of $app_base and\n  $deployment_path can be specified.\n- $war_ensure specifies whether you are trying to add or remove the WAR.\n  Valid values are 'present', 'absent', 'true', and 'false'. Defaults to\n  'present'.\n_ Optionally specify a $war_name. Defaults to $name.\n- $war_purge is a boolean specifying whether or not to purge the exploded WAR\n  directory. Defaults to true. Only applicable when $war_ensure is 'absent'\n  or 'false'. Note: if tomcat is running and autodeploy is on, setting\n  $war_purge to false won't stop tomcat from auto-undeploying exploded WARs.\n- $war_source is the source to deploy the WAR from. Currently supports\n  http(s)://, puppet://, and ftp:// paths. $war_source must be specified\n  unless $war_ensure is set to 'false' or 'absent'.\n"
  line: 22
